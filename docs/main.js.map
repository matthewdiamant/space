{"version":3,"file":"main.js","sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/worker-loader/dist/workers/InlineWorker.js","webpack:///./node_modules/zzfx/ZzFX.js","webpack:///./src/Background.js","webpack:///./src/Blood.js","webpack:///./src/BloodChunk.js","webpack:///./src/BloodCollection.js","webpack:///./src/Boss.js","webpack:///./src/Camera.js","webpack:///./src/Character.js","webpack:///./src/CollisionDetector.js","webpack:///./src/Drawer.js","webpack:///./src/Enemy.js","webpack:///./src/EnemyCollection.js","webpack:///./src/EnemyPersonas.js","webpack:///./src/GameContainer.js","webpack:///./src/GameObject.js","webpack:///./src/HUD.js","webpack:///./src/Keyboard.js","webpack:///./src/Level.js","webpack:///./src/Map.js","webpack:///./src/Music.js","webpack:///./src/Package.js","webpack:///./src/PackageCollection.js","webpack:///./src/Player.js","webpack:///./src/Projectile.js","webpack:///./src/ProjectileCollection.js","webpack:///./src/Sound.js","webpack:///./src/Sprites.js","webpack:///./src/Weapon.js","webpack:///./src/WeaponFactory.js","webpack:///./src/collisions.js","webpack:///./src/constants.js","webpack:///./src/enemyTypes.js","webpack:///./src/index.js","webpack:///./src/sound-box.worker.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","'use strict';\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};","/*\r\n\r\nZzFX - Zuper Zmall Zound Zynth v1.1.8\r\nBy Frank Force 2019\r\nhttps://github.com/KilledByAPixel/ZzFX\r\n\r\nZzFX Features\r\n\r\n- Tiny synth engine with 20 controllable parameters.\r\n- Play sounds via code, no need for sound assed files!\r\n- Compatible with most modern web browsers.\r\n- Small code footprint, the micro version is under 1 kilobyte.\r\n- Can produce a huge variety of sound effect types.\r\n- Sounds can be played with a short call. zzfx(...[,,,,.1,,,,9])\r\n- A small bit of randomness appied to sounds when played.\r\n- Use ZZFX.GetNote to get frequencies on a standard diatonic scale.\r\n- Sounds can be saved out as wav files for offline playback.\r\n- No additional libraries or dependencies are required.\r\n\r\n*/\r\n/*\r\n\r\n  ZzFX MIT License\r\n  \r\n  Copyright (c) 2019 - Frank Force\r\n  \r\n  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n  of this software and associated documentation files (the \"Software\"), to deal\r\n  in the Software without restriction, including without limitation the rights\r\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n  copies of the Software, and to permit persons to whom the Software is\r\n  furnished to do so, subject to the following conditions:\r\n  \r\n  The above copyright notice and this permission notice shall be included in all\r\n  copies or substantial portions of the Software.\r\n  \r\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n  SOFTWARE.\r\n  \r\n*/\r\n\r\n'use strict';\r\n\r\n// play a zzfx sound\r\nexport function zzfx(...parameters) { return ZZFX.play(...parameters) }\r\n\r\n// zzfx object with some extra functionalty\r\nexport const ZZFX =\r\n{\r\n    // master volume scale\r\n    volume: .3,\r\n    \r\n    // sample rate for audio\r\n    sampleRate: 44100,\r\n    \r\n    // create shared audio context\r\n    x: new (window.AudioContext || webkitAudioContext),\r\n\r\n    // play a sound from zzfx paramerters\r\n    play: function(...parameters)\r\n    {\r\n        // build samples and start sound\r\n        return this.playSamples(this.buildSamples(...parameters));\r\n    },\r\n\r\n    // play an array of samples\r\n    playSamples: function(...samples)\r\n    {\r\n        // create buffer and source\r\n        const buffer = this.x.createBuffer(samples.length, samples[0].length, this.sampleRate);\r\n        const source = this.x.createBufferSource();\r\n\r\n        samples.map((d,i)=> buffer.getChannelData(i).set(d));\r\n        source.buffer = buffer;\r\n        source.connect(this.x.destination);\r\n        source.start();\r\n        return source;\r\n    },\r\n\r\n    // build an array of samples\r\n    buildSamples: function\r\n    (\r\n        volume = 1, \r\n        randomness = .05,\r\n        frequency = 220,\r\n        attack = 0,\r\n        sustain = 0,\r\n        release = .1,\r\n        shape = 0,\r\n        shapeCurve = 1,\r\n        slide = 0, \r\n        deltaSlide = 0, \r\n        pitchJump = 0, \r\n        pitchJumpTime = 0, \r\n        repeatTime = 0, \r\n        noise = 0,\r\n        modulation = 0,\r\n        bitCrush = 0,\r\n        delay = 0,\r\n        sustainVolume = 1,\r\n        decay = 0,\r\n        tremolo = 0\r\n    )\r\n    {\r\n        // init parameters\r\n        const PI2 = Math.PI*2;\r\n        let sampleRate = this.sampleRate,\r\n        sign = v => v>0?1:-1,\r\n        startSlide = slide *= 500 * PI2 / sampleRate / sampleRate,\r\n        startFrequency = \r\n            frequency *= (1 + randomness*2*Math.random() - randomness) * PI2 / sampleRate,\r\n        b=[], t=0, tm=0, i=0, j=1, r=0, c=0, s=0, f, length;\r\n\r\n        // scale by sample rate\r\n        attack = attack * sampleRate + 9; // minimum attack to prevent pop\r\n        decay *= sampleRate;\r\n        sustain *= sampleRate;\r\n        release *= sampleRate;\r\n        delay *= sampleRate;\r\n        deltaSlide *= 500 * PI2 / sampleRate**3;\r\n        modulation *= PI2 / sampleRate;\r\n        pitchJump *= PI2 / sampleRate;\r\n        pitchJumpTime *= sampleRate;\r\n        repeatTime = repeatTime * sampleRate | 0;\r\n\r\n        // generate waveform\r\n        for(length = attack + decay + sustain + release + delay | 0;\r\n            i < length; b[i++] = s)\r\n        {\r\n            if (!(++c%(bitCrush*100|0)))                      // bit crush\r\n            { \r\n                s = shape? shape>1? shape>2? shape>3?         // wave shape\r\n                    Math.sin((t%PI2)**3) :                    // 4 noise\r\n                    Math.max(Math.min(Math.tan(t),1),-1):     // 3 tan\r\n                    1-(2*t/PI2%2+2)%2:                        // 2 saw\r\n                    1-4*Math.abs(Math.round(t/PI2)-t/PI2):    // 1 triangle\r\n                    Math.sin(t);                              // 0 sin\r\n\r\n                s = (repeatTime ?\r\n                        1 - tremolo + tremolo*Math.sin(PI2*i/repeatTime) // tremolo\r\n                        : 1) *\r\n                    sign(s)*(Math.abs(s)**shapeCurve) *       // curve 0=square, 2=pointy\r\n                    volume * this.volume * (                  // envelope\r\n                    i < attack ? i/attack :                   // attack\r\n                    i < attack + decay ?                      // decay\r\n                    1-((i-attack)/decay)*(1-sustainVolume) :  // decay falloff\r\n                    i < attack  + decay + sustain ?           // sustain\r\n                    sustainVolume :                           // sustain volume\r\n                    i < length - delay ?                      // release\r\n                    (length - i - delay)/release *            // release falloff\r\n                    sustainVolume :                           // release volume\r\n                    0);                                       // post release\r\n\r\n                s = delay ? s/2 + (delay > i ? 0 :            // delay\r\n                    (i<length-delay? 1 : (length-i)/delay) *  // release delay \r\n                    b[i-delay|0]/2) : s;                      // sample delay\r\n            }\r\n\r\n            f = (frequency += slide += deltaSlide) *          // frequency\r\n                Math.cos(modulation*tm++);                    // modulation\r\n            t += f - f*noise*(1 - (Math.sin(i)+1)*1e9%2);     // noise\r\n\r\n            if (j && ++j > pitchJumpTime)       // pitch jump\r\n            {\r\n                frequency += pitchJump;         // apply pitch jump\r\n                startFrequency += pitchJump;    // also apply to start\r\n                j = 0;                          // stop pitch jump time\r\n            }\r\n\r\n            if (repeatTime && !(++r % repeatTime)) // repeat\r\n            {\r\n                frequency = startFrequency;     // reset frequency\r\n                slide = startSlide;             // reset slide\r\n                j = j || 1;                     // reset pitch jump time\r\n            }\r\n        }\r\n\r\n        return b;\r\n    },\r\n    \r\n    // get frequency of a musical note on a diatonic scale\r\n    getNote: function(semitoneOffset=0, rootNoteFrequency=440)\r\n    {\r\n        return rootNoteFrequency * 2**(semitoneOffset/12);\r\n    }\r\n\r\n} // ZZFX","let nearStars = [];\nlet farStars = [];\n\nfunction mod(n, m) {\n  return ((n % m) + m) % m;\n}\n\nexport default class Background {\n  constructor({ cw, ch }) {\n    for (let i = 0; i < 10; i++)\n      nearStars.push([Math.random() * cw, Math.random() * ch, Math.random()]);\n    for (let i = 0; i < 10; i++)\n      farStars.push([Math.random() * cw, Math.random() * ch, Math.random()]);\n  }\n\n  draw(drawer) {\n    const [top, bottom] = this.colors;\n    drawer.draw(() => {\n      drawer.drawBackground(top, bottom);\n      nearStars.map((star) =>\n        drawer.rect({\n          rect: [\n            mod(\n              star[0] - drawer.camera.x / (3 + 3 * star[2]),\n              drawer.canvas.width\n            ),\n            mod(\n              star[1] - drawer.camera.y / (3 + 3 * star[2]),\n              drawer.canvas.height\n            ),\n            1,\n            1,\n          ],\n          fillColor: \"rgba(255, 255, 255, 0.6)\",\n          adjusted: false,\n        })\n      );\n      farStars.map((star) =>\n        drawer.rect({\n          rect: [\n            mod(\n              star[0] - drawer.camera.x / (7 + 3 * star[2]),\n              drawer.canvas.width\n            ),\n            mod(\n              star[1] - drawer.camera.y / (7 + 3 * star[2]),\n              drawer.canvas.height\n            ),\n            1,\n            1,\n          ],\n          fillColor: \"rgba(255, 255, 255, 0.3)\",\n          adjusted: false,\n        })\n      );\n\n      const planets = [\n        [100, 30, 1, 10, \"#440\"],\n        [30, 50, 1, 4, \"#311\"],\n      ];\n      planets.forEach((planet) => {\n        drawer.arc({\n          adjusted: false,\n          arc: [\n            mod(\n              planet[0] - drawer.camera.x / (7 + 3 * planet[2]),\n              drawer.canvas.width\n            ),\n            mod(\n              planet[1] - drawer.camera.y / (7 + 3 * planet[2]),\n              drawer.canvas.height\n            ),\n            planet[3],\n            0,\n            2 * Math.PI,\n          ],\n          fillColor: planet[4],\n        });\n      });\n    });\n  }\n}\n","import GameObject from \"./GameObject\";\n\nclass Blood extends GameObject {\n  constructor(x, y, dx, dy, color) {\n    super({ x, y, grav: 0.1 });\n    this.dx = dx;\n    this.dy = dy;\n    this.color = color;\n    this.stuck = false;\n  }\n\n  stick() {\n    this.stuck = true;\n  }\n\n  tick() {\n    if (this.stuck) return;\n    this.x += this.dx;\n    this.dy += this.grav;\n    this.y += this.dy;\n  }\n\n  draw(drawer) {\n    drawer.rect({\n      fillColor: this.color,\n      rect: [this.x, this.y, 1, 1],\n    });\n  }\n}\n\nexport default Blood;\n","import GameObject from \"./GameObject\";\n\nclass BloodChunk extends GameObject {\n  constructor(x, y, dx, dy, color) {\n    super({ x, y });\n    this.dx = dx;\n    this.dy = dy;\n    this.grav = 0.1;\n    this.color = color;\n    this.stuck = false;\n  }\n\n  stick() {\n    this.stuck = true;\n  }\n\n  tick() {\n    if (this.stuck) return;\n    this.x += this.dx;\n    this.dy += this.grav;\n    this.y += this.dy;\n  }\n\n  draw(drawer) {\n    drawer.rect({\n      fillColor: this.color,\n      rect: [this.x, this.y - 2, 2, 3],\n    });\n\n    [\n      [1, 2],\n      [2, 3],\n    ].forEach(([x, y]) => {\n      drawer.rect({\n        fillColor: this.color,\n        rect: [this.x + x - 2, this.y + y - 2, 1, 1],\n      });\n    });\n\n    [\n      [2, 0],\n      [1, 1],\n      [0, 2],\n      [1, 3],\n    ].forEach(([x, y]) => {\n      drawer.rect({\n        fillColor: \"#FF77A8\",\n        rect: [this.x + x - 2, this.y + y - 2, 1, 1],\n      });\n    });\n  }\n}\n\nexport default BloodChunk;\n","class BloodCollection {\n  constructor() {\n    this.spurts = [];\n  }\n\n  add(blood) {\n    this.spurts.push(blood);\n  }\n\n  tick() {\n    if (this.spurts.length > 1000) {\n      this.spurts = this.spurts.slice(this.spurts.length - 1000);\n    }\n    this.spurts.forEach((s) => s.tick());\n  }\n\n  draw(drawer) {\n    this.spurts.forEach((s) => s.draw(drawer));\n  }\n}\n\nexport default BloodCollection;\n","import Blood from \"./Blood\";\nimport BloodChunk from \"./BloodChunk\";\nimport Character from \"./Character\";\nimport Weapon from \"./Weapon\";\n\nimport { collideFloor } from \"./collisions\";\nimport { humanoid } from \"./Sprites\";\nimport { minigun } from \"./WeaponFactory\";\nimport { bossColors } from \"./enemyTypes\";\n\nconst clamp = (num, min, max) => Math.min(Math.max(min, num), max);\n\nconst anglerProjectiles = {\n  color: () => \"yellow\",\n  speed: 1.5,\n  lift: -0.6,\n  grav: 0,\n  spreadY: 0.3,\n  explosion: 3,\n  size: 5,\n  damage: 10,\n  blood: 20,\n};\n\nconst angler = {\n  cooldown: 15,\n  payloadCount: 1,\n  shake: { force: 1, duration: 15 },\n  sound: \"shotgun\",\n  projectileConfig: anglerProjectiles,\n};\n\nconst angler2 = Object.assign({}, angler);\nangler2.projectileConfig = Object.assign({}, anglerProjectiles);\nangler2.projectileConfig.lift = 0.6;\n\nconst makeMini = (lift) => {\n  const proj = Object.assign({}, minigun.projectileConfig);\n  proj.lift = lift;\n  const mini = Object.assign({}, minigun);\n  mini.projectileConfig = proj;\n  return mini;\n};\n\n// prettier-ignore\nconst weapons = [\n  { weapon: new Weapon(makeMini(0.8)),  y: 25,  x: 40, shoot: 40, offset: 70 },\n  { weapon: new Weapon(makeMini(0.4)),  y: 28, x: 40, shoot: 40, offset: 60 },\n  { weapon: new Weapon(minigun),        y: 31, x: 40, shoot: 40, offset: 50 },\n  { weapon: new Weapon(makeMini(0)),    y: 33, x: 40, shoot: 40, offset: 40 },\n  { weapon: new Weapon(makeMini(-0.4)), y: 36, x: 40, shoot: 40, offset: 30 },\n  { weapon: new Weapon(makeMini(-0.8)), y: 39, x: 40, shoot: 40, offset: 20 },\n\n  { weapon: new Weapon(angler), y: 30, x: 0, shoot: 100, offset: 200 },\n  { weapon: new Weapon(angler2), y: 10, x: 0, shoot: 100, offset: 200 },\n];\n\nconst death = {\n  cooldown: 15,\n  payloadCount: 0,\n  shake: { force: 4, duration: 200 },\n  sound: \"death\",\n  projectileConfig: {\n    color: () => \"yellow\",\n    speed: 1.5,\n    lift: -0.6,\n    grav: 0,\n    spreadY: 0.3,\n    explosion: 3,\n    size: 5,\n    damage: 10,\n    blood: 5,\n  },\n};\n\nclass Boss extends Character {\n  constructor(x, y, health, facing, weapon) {\n    super(x, y, health, facing, weapon);\n    this.bloodColor = \"#32CD32\";\n    this.size = 56;\n  }\n\n  tick({ map, projectiles, camera, sound, player }) {\n    this.lifespan += 1;\n\n    // move y\n    this.dy += this.grav;\n    this.dy = clamp(this.dy, -this.maxDy, this.maxDy);\n    this.y += this.dy;\n\n    if (!collideFloor(this, map)) {\n      this.grounded = false;\n      this.airtime += 1;\n    }\n\n    if (!(this.lifespan % 200))\n      this.facing = player.x > this.x + this.size / 2 ? 1 : -1;\n\n    weapons.forEach(({ weapon, x, y, shoot, offset }) => {\n      if (this.lifespan <= 100) return;\n      const weaponLocation = {\n        x: this.x + x,\n        y: this.y + y,\n        facing: this.facing,\n      };\n\n      const space = (this.lifespan + offset) % 400 < shoot;\n      weapon.tick(space, projectiles, weaponLocation, camera, sound, this);\n    });\n\n    if (this.health <= 0) {\n      const space = true;\n      const weaponLocation = {};\n      new Weapon(death).tick(\n        space,\n        projectiles,\n        weaponLocation,\n        camera,\n        sound,\n        this\n      );\n    }\n  }\n\n  explode({ spurts, chunks, sound }) {\n    sound.play(\"death\");\n    for (let i = 0; i < 300; i++) {\n      spurts.add(\n        new Blood(\n          this.x + Math.random() * 60,\n          this.y + Math.random() * 60,\n          Math.random() * 5 - 2.5,\n          Math.random() * 5 - 5,\n          this.bloodColor\n        )\n      );\n    }\n    for (let i = 0; i < 40; i++) {\n      chunks.chunks.push(\n        new BloodChunk(\n          this.x + Math.random() * 60,\n          this.y + Math.random() * 60,\n          Math.random() * 3 - 1.5,\n          Math.random() * 3 - 1.5,\n          this.bloodColor\n        )\n      );\n    }\n  }\n\n  draw(drawer) {\n    if (this.health < this.maxHealth) {\n      drawer.rect({\n        fillColor: \"white\",\n        rect: [this.x - 2, this.y - 22, 60 * (this.health / this.maxHealth), 2],\n      });\n    }\n\n    humanoid(\n      this.x - (this.facing === 1 ? 13 : 26),\n      this.y - 40,\n      this.facing,\n      bossColors,\n      {\n        huge: true,\n      }\n    ).forEach(({ c, r }) => drawer.rect({ fillColor: c, rect: r }));\n  }\n}\n\nexport default Boss;\n","import { canvasWidth, canvasHeight } from \"./constants\";\nconst pullThreshold = 10;\nconst HUDSize = 15;\n\nclass Camera {\n  constructor() {\n    this.x = 0;\n    this.y = 128;\n    this.position_x = 0;\n    this.position_y = 128;\n    this.shakeRemaining = 0;\n    this.shakeForce = 0;\n  }\n\n  adjustX(x, width) {\n    return x - this.x + width / 2;\n  }\n\n  adjustY(y, height) {\n    return y - this.y + height / 2;\n  }\n\n  clampX(map) {\n    this.position_x = Math.round(\n      Math.min(\n        Math.max((canvasWidth / 8 / 2) * map.tileSize, this.position_x),\n        (map.mapLength - canvasWidth / 8 / 2) * map.tileSize\n      )\n    );\n  }\n\n  clampY(map) {\n    this.position_y = Math.round(\n      Math.min(\n        Math.max((canvasHeight / 8 / 2) * map.tileSize, this.position_y),\n        (map.mapHeight - canvasHeight / 8 / 2) * map.tileSize + HUDSize\n      )\n    );\n  }\n\n  followSubject(subject) {\n    if (subject.x - this.position_x > pullThreshold) {\n      this.position_x = subject.x - pullThreshold;\n    }\n    if (subject.x - this.position_x < -pullThreshold) {\n      this.position_x = subject.x + pullThreshold;\n    }\n    if (subject.y - this.position_y > pullThreshold) {\n      this.position_y = subject.y - pullThreshold;\n    }\n    if (subject.y - this.position_y < -pullThreshold) {\n      this.position_y = subject.y + pullThreshold;\n    }\n  }\n\n  shake(force, duration) {\n    this.shakeRemaining = duration;\n    this.shakeForce = force;\n  }\n\n  applyShake() {\n    this.shakeRemaining = Math.max(0, this.shakeRemaining - 1);\n    if (!this.shakeRemaining) return;\n    const shakeX = Math.random() * this.shakeForce * 2 - this.shakeForce;\n    const shakeY = Math.random() * this.shakeForce * 2 - this.shakeForce;\n    this.x += shakeX;\n    this.y += shakeY;\n  }\n\n  tick({ player, map }) {\n    this.followSubject(player, map);\n    this.clampX(map);\n    this.clampY(map);\n    this.x = this.position_x;\n    this.y = this.position_y;\n    this.applyShake();\n  }\n}\n\nexport default Camera;\n","import GameObject from \"./GameObject\";\nimport WeaponFactory from \"./WeaponFactory\";\nimport { collideSide, collideFloor, collideRoof } from \"./collisions\";\n\nconst clamp = (num, min, max) => Math.min(Math.max(min, num), max);\n\nclass Character extends GameObject {\n  constructor(x, y, health, facing, weapon) {\n    super({ x, y, maxDx: 1, maxDy: 2, grav: 0.15 });\n    this.size = 8;\n    this.acc = 0.05;\n    this.dcc = 0.8;\n    this.airDcc = 1;\n    this.grounded = true;\n    this.facing = facing || 1;\n    this.lifespan = 0;\n\n    // jumping\n    this.holdJump = 0;\n    this.airtime = 0;\n    this.jumpHoldTime = 0;\n    this.jumpSpeed = 2;\n    this.maxJumpPress = 12;\n\n    this.health = health;\n    this.maxHealth = health;\n\n    this.weapon = weapon || new WeaponFactory().random();\n  }\n\n  static tick({ camera, map, projectiles, presses, immobile, sound }) {\n    this.lifespan += 1;\n\n    const { left, right, up, space } = presses;\n    this.holdJump = up ? this.holdJump + 1 : 0;\n\n    const weaponLocation = {\n      x: this.x + (this.facing === 1 ? this.size - 1 : 1),\n      y: this.y + 5,\n      facing: this.facing,\n    };\n\n    let knockback = 0;\n    if (this.weapon) {\n      knockback = this.weapon.tick(\n        space,\n        projectiles,\n        weaponLocation,\n        camera,\n        sound,\n        this\n      );\n    }\n\n    // move x\n    if (left) {\n      this.dx -= this.acc;\n      this.facing = -1;\n    } else if (right) {\n      this.dx += this.acc;\n      this.facing = 1;\n    } else {\n      if (this.grounded) {\n        this.dx *= this.dcc;\n      } else {\n        this.dx *= this.airDcc;\n      }\n    }\n    if (Math.abs(this.dx) < 0.01) this.dx = 0;\n    this.dx = clamp(this.dx, -this.maxDx, this.maxDx);\n    this.dx += knockback * -this.facing;\n    this.x += immobile ? 0 : this.dx;\n\n    // hit walls\n    collideSide(this, map);\n\n    // jumping\n    if (up) {\n      const onGround = this.grounded || this.airtime < 5;\n      const newJump = this.holdJump < 10;\n      if (this.jumpHoldTime > 0 || (onGround && newJump)) {\n        if (this.jumpHoldTime === 0) sound.play(\"jump\");\n        this.jumpHoldTime += 1;\n        if (this.jumpHoldTime < this.maxJumpPress) {\n          this.dy = -this.jumpSpeed;\n        }\n      }\n    } else {\n      this.jumpHoldTime = 0;\n    }\n\n    // move y\n    this.dy += this.grav;\n    this.dy = clamp(this.dy, -this.maxDy, this.maxDy);\n    this.y += this.dy;\n\n    if (!collideFloor(this, map)) {\n      this.grounded = false;\n      this.airtime += 1;\n    }\n\n    collideRoof(this, map);\n  }\n\n  static takeDamage(damage) {\n    this.health -= damage;\n  }\n}\n\nexport default Character;\n","import Blood from \"./Blood\";\nimport Character from \"./Character\";\n\nconst collision = (a, b) => {\n  return (\n    a.x < b.x + b.size &&\n    a.x + a.size > b.x &&\n    a.y < b.y + b.size &&\n    a.y + a.size > b.y\n  );\n};\nexport default class CollisionDetector {\n  handleProjectile(projectile, object, spurts) {\n    if (\n      !(projectile.exploding || object.exploding) &&\n      object.health > 0 &&\n      projectile.owner !== object &&\n      collision(projectile, object)\n    ) {\n      projectile.destroy();\n      Character.takeDamage.call(\n        object,\n        projectile.damage * projectile.damageMod\n      );\n      for (let i = 0; i < projectile.blood; i++) {\n        spurts.add(\n          new Blood(\n            projectile.x,\n            projectile.y,\n            (projectile.dx / 3) * Math.random() * 2,\n            -1.5 * Math.random(),\n            object.bloodColor\n          )\n        );\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  handlePackage(packge, object, packages) {\n    if (collision(packge, object)) {\n      if (packge.type === \"weapon\") {\n        object.weapon = packge.weapon;\n      } else {\n        object.health += 200;\n        object.health = Math.min(object.maxHealth, object.health);\n      }\n      packages.packages = packages.packages.filter((p) => p !== packge);\n    }\n  }\n}\n","import Camera from \"./Camera\";\n\nlet cx = null;\n\nexport default class Drawer {\n  constructor(canvas) {\n    this.canvas = canvas;\n    cx = this.canvas.getContext(\"2d\");\n    this.camera = new Camera();\n  }\n\n  draw(d) {\n    cx.save();\n    d();\n    cx.restore();\n  }\n\n  clearBackground() {\n    cx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  drawBackground(start, end) {\n    cx.save();\n    var gradient = cx.createLinearGradient(20, 0, 220, 0);\n\n    gradient.addColorStop(0, start);\n    gradient.addColorStop(1, end);\n\n    cx.rotate(Math.PI / 2);\n    cx.translate(0, -this.canvas.height);\n\n    cx.fillStyle = gradient;\n\n    cx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    cx.restore();\n  }\n\n  rect({\n    rect,\n    fillColor,\n    strokeColor,\n    shadowBlur = 0,\n    shadowColor = \"none\",\n    lineWidth = 1,\n    adjusted = true,\n    rotation,\n    size,\n    crisp = true,\n  }) {\n    if (crisp) {\n      rect[0] = Math.floor(rect[0]);\n      rect[1] = Math.floor(rect[1]);\n    }\n    if (adjusted) {\n      rect[0] = this.camera.adjustX(rect[0], this.canvas.width);\n      rect[1] = this.camera.adjustY(rect[1], this.canvas.height);\n    }\n    if (rotation) {\n      cx.translate(rect[0] + size / 2, rect[1] + size / 2);\n      cx.rotate(rotation);\n      cx.translate(-1 * rect[0] - size / 2, -1 * rect[1] - size / 2);\n    }\n    cx.shadowBlur = shadowBlur;\n    cx.shadowColor = shadowColor;\n    if (fillColor) {\n      cx.fillStyle = fillColor;\n      cx.fillRect(...[rect[0], rect[1], ...rect.slice(2)]);\n    }\n    if (strokeColor) {\n      cx.strokeStyle = strokeColor;\n      cx.lineWidth = lineWidth;\n      cx.strokeRect(...[rect[0], rect[1], ...rect.slice(2)]);\n    }\n    cx.shadowBlur = 0;\n  }\n\n  arc({\n    arc,\n    adjusted = true,\n    fillColor,\n    strokeColor,\n    shadowBlur,\n    shadowColor,\n  }) {\n    if (adjusted) {\n      arc[0] = this.camera.adjustX(arc[0], this.canvas.width);\n      arc[1] = this.camera.adjustY(arc[1], this.canvas.height);\n    }\n    cx.beginPath();\n    cx.arc(...arc);\n    cx.shadowBlur = shadowBlur;\n    cx.shadowColor = shadowColor;\n    if (fillColor) {\n      cx.fillStyle = fillColor;\n      cx.fill();\n    }\n    if (strokeColor) {\n      cx.strokeStyle = strokeColor;\n      cx.stroke();\n    }\n    cx.shadowBlur = 0;\n  }\n\n  text({ text, x, y, fillColor = \"#fff\", size = 1 }) {\n    cx.fillStyle = fillColor;\n\n    let currX = 0;\n\n    text\n      .toUpperCase()\n      .split(\"\")\n      .map((c) => {\n        if (!letters[c]) console.log(c);\n        return letters[c];\n      })\n      .forEach((letter) => {\n        let currY = 0;\n        let addX = 0;\n        letter.forEach((row) => {\n          row.forEach((bit, i) => {\n            bit && cx.fillRect(currX + i * size + x, currY + y, size, size);\n          });\n          addX = Math.max(addX, row.length * size);\n          currY += size;\n        });\n        currX += size + addX;\n      });\n  }\n\n  lines({ lines, shadowBlur = 0, shadowColor, fillColor, strokeColor }) {\n    cx.beginPath();\n    cx.moveTo(lines[0][0], lines[0][1]);\n    lines.slice(1).map((line) => cx.lineTo(line[0], line[1]));\n    cx.closePath();\n    cx.shadowBlur = shadowBlur;\n    cx.shadowColor = shadowColor;\n    if (strokeColor) {\n      cx.strokeStyle = strokeColor;\n      cx.stroke();\n    }\n    if (fillColor) {\n      cx.fillStyle = fillColor;\n      cx.fill();\n    }\n  }\n\n  emoji({ emoji, x, y, adjusted = true }) {\n    if (adjusted) {\n      x = this.camera.adjustX(x, this.canvas.width);\n      y = this.camera.adjustY(y, this.canvas.height);\n    }\n    cx.font = \"4px serif\";\n    cx.fillText(emoji, x, y);\n  }\n\n  hitbox({ x, y, size }) {\n    this.rect({\n      rect: [x - size / 2, y - size / 2, size, size],\n      color: \"#f00\",\n    });\n  }\n}\n\nconst letters = {};\nletters[\"A\"] = [\n  [, 1],\n  [1, , 1],\n  [1, , 1],\n  [1, 1, 1],\n  [1, , 1],\n];\nletters[\"B\"] = [\n  [1, 1],\n  [1, , 1],\n  [1, 1, 1],\n  [1, , 1],\n  [1, 1],\n];\nletters[\"C\"] = [[1, 1, 1], [1], [1], [1], [1, 1, 1]];\nletters[\"D\"] = [\n  [1, 1],\n  [1, , 1],\n  [1, , 1],\n  [1, , 1],\n  [1, 1],\n];\nletters[\"E\"] = [[1, 1, 1], [1], [1, 1, 1], [1], [1, 1, 1]];\nletters[\"F\"] = [[1, 1, 1], [1], [1, 1], [1], [1]];\nletters[\"G\"] = [[, 1, 1], [1], [1, , 1, 1], [1, , , 1], [, 1, 1]];\nletters[\"H\"] = [\n  [1, , 1],\n  [1, , 1],\n  [1, 1, 1],\n  [1, , 1],\n  [1, , 1],\n];\nletters[\"I\"] = [\n  [1, 1, 1],\n  [, 1],\n  [, 1],\n  [, 1],\n  [1, 1, 1],\n];\nletters[\"J\"] = [\n  [1, 1, 1],\n  [, , 1],\n  [, , 1],\n  [1, , 1],\n  [1, 1, 1],\n];\nletters[\"K\"] = [\n  [1, , , 1],\n  [1, , 1],\n  [1, 1],\n  [1, , 1],\n  [1, , , 1],\n];\nletters[\"L\"] = [[1], [1], [1], [1], [1, 1, 1]];\nletters[\"M\"] = [\n  [1, 1, 1, 1, 1],\n  [1, , 1, , 1],\n  [1, , 1, , 1],\n  [1, , , , 1],\n  [1, , , , 1],\n];\nletters[\"N\"] = [\n  [1, , , 1],\n  [1, 1, , 1],\n  [1, , 1, 1],\n  [1, , , 1],\n  [1, , , 1],\n];\nletters[\"O\"] = [\n  [1, 1, 1],\n  [1, , 1],\n  [1, , 1],\n  [1, , 1],\n  [1, 1, 1],\n];\nletters[\"P\"] = [[1, 1, 1], [1, , 1], [1, 1, 1], [1], [1]];\nletters[\"Q\"] = [\n  [0, 1, 1],\n  [1, , , 1],\n  [1, , , 1],\n  [1, , 1, 1],\n  [1, 1, 1, 1],\n];\nletters[\"R\"] = [\n  [1, 1],\n  [1, , 1],\n  [1, , 1],\n  [1, 1],\n  [1, , 1],\n];\nletters[\"S\"] = [[1, 1, 1], [1], [1, 1, 1], [, , 1], [1, 1, 1]];\nletters[\"T\"] = [\n  [1, 1, 1],\n  [, 1],\n  [, 1],\n  [, 1],\n  [, 1],\n];\nletters[\"U\"] = [\n  [1, , 1],\n  [1, , 1],\n  [1, , 1],\n  [1, , 1],\n  [1, 1, 1],\n];\nletters[\"V\"] = [\n  [1, , , , 1],\n  [1, , , , 1],\n  [, 1, , 1],\n  [, 1, , 1],\n  [, , 1],\n];\nletters[\"W\"] = [\n  [1, , , , 1],\n  [1, , , , 1],\n  [1, , , , 1],\n  [1, , 1, , 1],\n  [1, 1, 1, 1, 1],\n];\nletters[\"X\"] = [\n  [1, , , , 1],\n  [, 1, , 1],\n  [, , 1],\n  [, 1, , 1],\n  [1, , , , 1],\n];\nletters[\"Y\"] = [\n  [1, , 1],\n  [1, , 1],\n  [, 1],\n  [, 1],\n  [, 1],\n];\nletters[\"Z\"] = [\n  [1, 1, 1, 1, 1],\n  [, , , 1],\n  [, , 1],\n  [, 1],\n  [1, 1, 1, 1, 1],\n];\nletters[\" \"] = [\n  [, ,],\n  [, ,],\n  [, ,],\n  [, ,],\n  [, ,],\n];\nletters[\"0\"] = [\n  [1, 1, 1],\n  [1, , 1],\n  [1, , 1],\n  [1, , 1],\n  [1, 1, 1],\n];\nletters[\"1\"] = [\n  [, 1],\n  [, 1],\n  [, 1],\n  [, 1],\n  [, 1],\n];\nletters[\"2\"] = [\n  [1, 1, 1],\n  [0, 0, 1],\n  [1, 1, 1],\n  [1, 0, 0],\n  [1, 1, 1],\n];\nletters[\"3\"] = [\n  [1, 1, 1],\n  [0, 0, 1],\n  [1, 1, 1],\n  [0, 0, 1],\n  [1, 1, 1],\n];\nletters[\"4\"] = [\n  [1, 0, 1],\n  [1, 0, 1],\n  [1, 1, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n];\nletters[\"5\"] = [\n  [1, 1, 1],\n  [1, 0, 0],\n  [1, 1, 1],\n  [0, 0, 1],\n  [1, 1, 1],\n];\nletters[\"6\"] = [\n  [1, 1, 1],\n  [1, 0, 0],\n  [1, 1, 1],\n  [1, 0, 1],\n  [1, 1, 1],\n];\nletters[\"7\"] = [\n  [1, 1, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n  [0, 0, 1],\n];\nletters[\"8\"] = [\n  [1, 1, 1],\n  [1, 0, 1],\n  [1, 1, 1],\n  [1, 0, 1],\n  [1, 1, 1],\n];\nletters[\"9\"] = [\n  [1, 1, 1],\n  [1, 0, 1],\n  [1, 1, 1],\n  [0, 0, 1],\n  [1, 1, 1],\n];\n","import Blood from \"./Blood\";\nimport BloodChunk from \"./BloodChunk\";\nimport Character from \"./Character\";\nimport { humanoid } from \"./Sprites\";\n\nclass Enemy extends Character {\n  constructor(x, y, health, facing, colors, persona, weapon) {\n    super(x, y, health, facing, weapon);\n    this.maxDx = 0.8;\n    this.colors = colors;\n    this.bloodColor = \"#32CD32\";\n    this.presses = {\n      left: false,\n      right: false,\n      up: false,\n      space: false,\n    };\n    this.persona = persona;\n  }\n\n  tick({ camera, map, projectiles, player, sound }) {\n    const [presses, immobile] = this.persona({ enemy: this, map, player });\n    if (presses) this.presses = presses;\n    Character.tick.call(this, {\n      camera,\n      map,\n      projectiles,\n      presses: this.presses,\n      sound,\n      immobile,\n    });\n  }\n\n  explode({ spurts, chunks, sound }) {\n    sound.play(\"death\");\n    for (let i = 0; i < 100; i++) {\n      spurts.add(\n        new Blood(\n          this.x,\n          this.y,\n          Math.random() * 5 - 2.5,\n          Math.random() * 5 - 5,\n          this.bloodColor\n        )\n      );\n    }\n    for (let i = 0; i < 5; i++) {\n      chunks.chunks.push(\n        new BloodChunk(\n          this.x,\n          this.y - 2,\n          Math.random() * 3 - 1.5,\n          Math.random() * 3 - 1.5,\n          \"red\"\n        )\n      );\n    }\n  }\n\n  draw(drawer) {\n    if (this.health < this.maxHealth) {\n      drawer.rect({\n        fillColor: \"white\",\n        rect: [this.x, this.y - 1, 8 * (this.health / this.maxHealth), 1],\n      });\n    }\n\n    humanoid(this.x, this.y, this.facing, this.colors).forEach(({ c, r }) =>\n      drawer.rect({ fillColor: c, rect: r })\n    );\n\n    this.weapon && this.weapon.draw(drawer, { x: this.x, y: this.y });\n  }\n}\n\nexport default Enemy;\n","import Boss from \"./Boss\";\nimport Enemy from \"./Enemy\";\nimport types from \"./enemyTypes\";\n\nclass EnemyCollection {\n  constructor() {\n    this.enemies = [];\n    this.remainingEnemies = [];\n    this.enemyCount = 0;\n  }\n\n  initialize({ concurrentEnemies, enemyCount, enemySpawnPoints, enemies }) {\n    this.concurrentEnemies = concurrentEnemies;\n    this.enemyCount = enemyCount;\n    this.enemySpawnPoint = () =>\n      enemySpawnPoints[Math.floor(Math.random() * enemySpawnPoints.length)];\n\n    this.remainingEnemies = [];\n    Object.entries(enemies).forEach(([type, count]) => {\n      this.remainingEnemies = this.remainingEnemies.concat(\n        Array(count).fill(type)\n      );\n    });\n\n    for (let i = 0; i < concurrentEnemies; i++) {\n      this.enemies.push(this.createEnemy());\n    }\n  }\n\n  createEnemy() {\n    this.enemyCount -= 1;\n    const { type, health, persona, colors, weapon } = types[\n      this.remainingEnemies.pop()\n    ];\n    const [x, y] = this.enemySpawnPoint();\n    if (type === \"boss\") {\n      return new Boss(x, y, health, -1);\n    } else {\n      return new Enemy(x, y, health, -1, colors, persona, weapon);\n    }\n  }\n\n  tick({ camera, map, projectiles, spurts, chunks, player, sound }) {\n    this.enemies.forEach((enemy) => {\n      enemy.tick({ camera, map, projectiles, player, sound });\n    });\n\n    this.enemies = this.enemies.reduce((enemies, enemy) => {\n      if (enemy.health <= 0) {\n        enemy.explode({ spurts, chunks, sound });\n        if (\n          this.enemies.length <= this.concurrentEnemies &&\n          this.enemyCount > 0\n        ) {\n          enemies.push(this.createEnemy());\n        }\n      } else {\n        enemies.push(enemy);\n      }\n      return enemies;\n    }, []);\n  }\n\n  draw(drawer) {\n    this.enemies.forEach((e) => e.draw(drawer));\n  }\n}\n\nexport default EnemyCollection;\n","const runRight = (enemy) => {\n  enemy.holdLeft = false;\n  enemy.holdRight = true;\n};\n\nconst runLeft = (enemy) => {\n  enemy.holdLeft = true;\n  enemy.holdRight = false;\n};\n\nconst laps = (enemy) => {\n  if (!enemy.holdLeft && !enemy.holdRight) enemy.holdRight = true;\n  if (enemy.x < 8 * 2) runRight(enemy);\n  if (enemy.x > 8 * 36) runLeft(enemy);\n};\n\nconst jumpToLedges = (freq, enemy, map) => {\n  if (enemy.jumpTimer > 0) {\n    enemy.jumpTimer -= 1;\n  } else {\n    const jumpTarget = map.getTile(\n      enemy.x + 3 * 8 * enemy.facing,\n      enemy.y - 2 * 8\n    );\n    enemy.jumpTimer = jumpTarget && Math.random() < freq ? 30 : 0;\n  }\n};\n\nconst shootOnSight = (enemy, player) => {\n  if (Math.abs(player.y - enemy.y) < 20) {\n    runTowardsObject(enemy, player);\n  }\n  return shootInRange({ enemy, player });\n};\n\nconst runTowardsObject = (enemy, object) => {\n  if (object.x - enemy.x > 0) {\n    runRight(enemy);\n  } else {\n    runLeft(enemy);\n  }\n};\n\nconst jumpTowardsObject = (enemy, object, map) => {\n  if (object.y < enemy.y) {\n    jumpToLedges(1, enemy, map);\n  }\n};\n\nconst shootInRange = ({ enemy, player }) => Math.abs(player.y - enemy.y) < 20;\n\nexport const aggro = ({ enemy, player, map }) => {\n  runTowardsObject(enemy, player);\n  jumpTowardsObject(enemy, player, map);\n  const space = shootInRange({ enemy, player });\n  const buttons = {\n    left: enemy.holdLeft,\n    right: enemy.holdRight,\n    up: enemy.jumpTimer > 0,\n    space,\n  };\n  return [buttons, false];\n};\n\nexport const runAndGun = ({ enemy, map, player }) => {\n  laps(enemy);\n  jumpToLedges(0.1, enemy, map);\n  const space = shootOnSight(enemy, player);\n  const buttons = {\n    left: enemy.holdLeft,\n    right: enemy.holdRight,\n    up: enemy.jumpTimer > 0,\n    space,\n  };\n  return [buttons, false];\n};\n\nexport const pacifist = ({ enemy, map }) => {\n  laps(enemy);\n  jumpToLedges(0.1, enemy, map);\n\n  const buttons = {\n    left: enemy.holdLeft,\n    right: enemy.holdRight,\n    up: enemy.jumpTimer > 0,\n  };\n\n  return [buttons, false];\n};\n\nexport const idiot = ({ enemy }) => {\n  const immobile = false;\n  let buttons;\n  if (enemy.lifespan % 30 === 0) {\n    const left = Math.random() < 0.5;\n    buttons = {\n      left: left,\n      right: !left,\n      up: Math.random() < 0.5,\n      space: Math.random() < 0.7,\n    };\n  } else {\n    buttons = null;\n  }\n  return [buttons, immobile];\n};\n\nexport const sentinel = ({ enemy, player }) => {\n  const space = enemy.x - player.x < 30 && enemy.x - player.x > 0;\n  const immobile = true;\n  return [\n    {\n      left: false,\n      right: false,\n      up: false,\n      space,\n    },\n    immobile,\n  ];\n};\n","let canvas = document.getElementById(\"c\");\nexport default class GameContainer {\n  constructor() {\n    this.canvas = canvas;\n  }\n\n  initialize() {\n    let container = document.querySelector(\"body\");\n    let resize = (e) => {\n      container.clientWidth / container.clientHeight > 1\n        ? (canvas.style.height = \"100vh\") && (canvas.style.width = \"auto\")\n        : (canvas.style.height = \"auto\") && (canvas.style.width = \"100vw\");\n    };\n    resize();\n    container.onresize = resize;\n  }\n}\n","export default class GameObject {\n  constructor({ x, y, maxDx, maxDy, grav }) {\n    this.x = x;\n    this.y = y;\n    this.dx = 0;\n    this.dy = 0;\n    this.maxDx = maxDx;\n    this.maxDy = maxDy;\n    this.grav = grav;\n  }\n}\n","import { canvasWidth, canvasHeight } from \"./constants\";\nimport { humanoid } from \"./Sprites\";\n\nclass HUD {\n  constructor() {}\n\n  tick(player, enemies, enemyColor) {\n    if (player.weapon) this.weapon = player.weapon.name;\n    this.health = player.health;\n    this.maxHealth = player.maxHealth;\n    this.dead = player.dead;\n    this.enemyCount = enemies.enemyCount + enemies.enemies.length;\n    this.enemyColor = enemyColor;\n  }\n\n  draw(drawer) {\n    if (this.dead) return;\n\n    if (this.weapon) {\n      drawer.text({\n        text: this.weapon,\n        size: 1,\n        x: 2,\n        y: canvasHeight - 11,\n      });\n    }\n\n    humanoid(canvasWidth - 15, canvasHeight - 13, 1, this.enemyColor, {\n      bodyless: true,\n    }).forEach(({ c, r }) =>\n      drawer.rect({ adjusted: false, fillColor: c, rect: r })\n    );\n\n    drawer.text({\n      text: `${this.enemyCount}`,\n      size: 1,\n      x: canvasWidth - 8,\n      y: canvasHeight - 11,\n    });\n\n    drawer.rect({\n      adjusted: false,\n      fillColor: `rgb(${255 * (1 - this.health / this.maxHealth)}, ${\n        255 * (this.health / this.maxHealth)\n      }, 0)`,\n      rect: [\n        2,\n        canvasHeight - 4,\n        canvasWidth * (this.health / this.maxHealth) - 4,\n        2,\n      ],\n    });\n  }\n}\n\nexport default HUD;\n","class Keyboard {\n  constructor() {\n    document.addEventListener(\"keyup\", (event) => this.onKeyup(event));\n    document.addEventListener(\"keydown\", (event) => this.onKeydown(event));\n\n    this._pressed = {};\n\n    this.ENTER = [13];\n    this.SPACE = [32];\n    this.LEFT = [37, 65];\n    this.UP = [38, 87];\n    this.RIGHT = [39, 68];\n    this.DOWN = [40, 83];\n  }\n\n  isDown(keyCode) {\n    return keyCode.some((key) => this._pressed[key]) || false;\n  }\n\n  onKeydown(event) {\n    this._pressed[event.keyCode] = true;\n  }\n\n  onKeyup(event) {\n    delete this._pressed[event.keyCode];\n  }\n}\n\nexport default Keyboard;\n","import Music from \"./Music\";\nimport Package from \"./Package\";\nimport WeaponFactory, {\n  assaultRifle,\n  debugPistol,\n  grenade,\n  minigun,\n  shotgun,\n  sniperRifle,\n} from \"./WeaponFactory\";\nimport { humanoid } from \"./Sprites\";\nimport {\n  sentinelColors,\n  pacifistColors,\n  idiotColors,\n  runAndGunColors,\n  aggroColors,\n  bossColors,\n} from \"./enemyTypes\";\nimport { canvasWidth, canvasHeight } from \"./constants\";\n\nconst colorSchemes = [\n  {\n    background: [\"#112\", \"#131\"],\n    tiles: [\"#114\", \"#336\", \"#003\"],\n  },\n  {\n    background: [\"#33f\", \"#1f1\"],\n    tiles: [\"#963\", \"#c96\", \"#620\"],\n  },\n];\n\nconst level1 = {\n  concurrentEnemies: 1,\n  spawnPoint: [40, 0],\n  enemyColor: sentinelColors,\n  enemySpawnPoints: [[230, 100]],\n  enemies: {\n    sentinel: 1,\n  },\n  colors: colorSchemes[0],\n};\n\nconst levelTemplates = [\n  (level) => ({\n    concurrentEnemies: 3,\n    spawnPoint: [40, 10],\n    enemyColor: sentinelColors,\n    enemySpawnPoints: [\n      [50, 10],\n      [100, 10],\n      [150, 10],\n      [200, 10],\n      [249, 10],\n    ],\n    enemies: {\n      sentinel: 10,\n    },\n    colors: colorSchemes[0],\n  }),\n  (level) => ({\n    concurrentEnemies: 3,\n    spawnPoint: [40, 150],\n    enemyColor: pacifistColors,\n    enemySpawnPoints: [\n      [50, 10],\n      [100, 10],\n      [150, 10],\n      [200, 10],\n      [249, 10],\n    ],\n    enemies: {\n      pacifist: 10,\n    },\n    colors: colorSchemes[0],\n  }),\n  (level) => ({\n    concurrentEnemies: 3,\n    spawnPoint: [40, 150],\n    enemyColor: idiotColors,\n    enemySpawnPoints: [\n      [50, 10],\n      [100, 10],\n      [150, 10],\n      [200, 10],\n      [249, 10],\n    ],\n    enemies: {\n      idiot: 10,\n    },\n    colors: colorSchemes[1],\n  }),\n  (level) => ({\n    concurrentEnemies: 3,\n    spawnPoint: [40, 150],\n    enemyColor: runAndGunColors,\n    enemySpawnPoints: [\n      [50, 10],\n      [100, 10],\n      [150, 10],\n      [200, 10],\n      [249, 10],\n    ],\n    enemies: {\n      runAndGun: 10,\n    },\n    colors: colorSchemes[0],\n  }),\n  (level) => ({\n    concurrentEnemies: 3,\n    spawnPoint: [40, 150],\n    enemyColor: aggroColors,\n    enemySpawnPoints: [\n      [50, 10],\n      [100, 10],\n      [150, 10],\n      [200, 10],\n      [249, 10],\n    ],\n    enemies: {\n      aggro: 10,\n    },\n    colors: colorSchemes[0],\n  }),\n  (level) => ({\n    concurrentEnemies: 1,\n    spawnPoint: [20, 156],\n    enemyColor: bossColors,\n    enemySpawnPoints: [[120, 10]],\n    enemies: {\n      boss: 1,\n    },\n    colors: colorSchemes[0],\n  }),\n];\n\nconst delay = 80;\n\nclass Level {\n  constructor() {\n    this.music = new Music();\n    this.musicStarted = false;\n    this.gameOver = false;\n    this.totalEnemies = 0;\n  }\n\n  initializeLevel(\n    level,\n    { player, enemies, chunks, spurts, packages, map, background }\n  ) {\n    this.level = level === 1 ? level1 : levelTemplates[(level - 1) % 6](level);\n    this.level.level = level;\n    this.level.enemyCount = Object.entries(this.level.enemies).reduce(\n      (sum, [k, v]) => sum + v,\n      0\n    );\n    map.loadLevel(level, this.level.colors.tiles);\n    background.colors = this.level.colors.background;\n    player.health = player.maxHealth;\n    player.x = this.level.spawnPoint[0];\n    player.y = this.level.spawnPoint[1];\n    chunks.chunks = [];\n    spurts.spurts = [];\n    packages.packages =\n      level === 1\n        ? [new Package(146, 90, new WeaponFactory().create(assaultRifle))]\n        : [];\n    enemies.initialize(this.level);\n    this.levelOverTimer = 0;\n    this.levelFadeIn = 0;\n    this.welcomeMessage = false;\n    this.totalEnemies += this.level.enemyCount;\n  }\n\n  tick({ player, enemies, chunks, spurts, packages, sound, map, background }) {\n    if (player.health <= 0) {\n      this.gameOver = true;\n    }\n\n    this.levelFadeIn += 1;\n\n    if (enemies.enemies.length <= 0) {\n      this.levelOverTimer += 1;\n    }\n\n    if (this.levelOverTimer > delay * (7 + (this.level.level === 1 ? 3 : 0))) {\n      this.initializeLevel(this.level.level + 1, {\n        player,\n        enemies,\n        chunks,\n        spurts,\n        packages,\n        map,\n        background,\n      });\n    }\n\n    const oldWelcomeMessage = this.welcomeMessage;\n    this.welcomeMessage =\n      this.level.level === 1 && this.levelOverTimer > delay * 7;\n    if (oldWelcomeMessage !== this.welcomeMessage) {\n      this.music.startMusic();\n    }\n\n    if (\n      [delay, delay * 2, delay * 3, delay * 4].includes(this.levelOverTimer)\n    ) {\n      sound.play(\"message\");\n    }\n  }\n\n  endOfLevelScreen(drawer) {\n    if (this.levelOverTimer > delay) {\n      drawer.rect({\n        adjusted: false,\n        fillColor: \"rgba(0,0,0,0.9)\",\n        rect: [(canvasWidth - 88) / 2, (canvasHeight - 62) / 2, 88, 62],\n      });\n    }\n\n    if (this.levelOverTimer > delay * 2) {\n      drawer.text({\n        text: `level ${this.level.level} complete`,\n        size: 1,\n        x: (canvasWidth - 88) / 2 + 11 - (this.level.level >= 10 ? 2 : 0),\n        y: (canvasHeight - 62) / 2 + 10,\n      });\n    }\n\n    if (this.levelOverTimer > delay * 3) {\n      drawer.text({\n        text: `${this.totalEnemies} alien${\n          this.totalEnemies !== 1 ? \"s\" : \"\"\n        } defeated`,\n        size: 1,\n        x: (canvasWidth - 88) / 2 + 11 - (this.totalEnemies >= 10 ? 2 : 0),\n        y: (canvasHeight - 62) / 2 + 25,\n      });\n    }\n\n    if (this.levelOverTimer > delay * 4) {\n      humanoid(\n        (canvasWidth - 88) / 2 + 12,\n        (canvasHeight - 62) / 2 + 40,\n        1,\n        sentinelColors,\n        {\n          bodyless: true,\n        }\n      ).forEach(({ c, r }) =>\n        drawer.rect({ adjusted: false, fillColor: c, rect: r })\n      );\n      humanoid(\n        (canvasWidth - 88) / 2 + 22,\n        (canvasHeight - 62) / 2 + 40,\n        1,\n        pacifistColors,\n        {\n          bodyless: true,\n        }\n      ).forEach(({ c, r }) =>\n        drawer.rect({ adjusted: false, fillColor: c, rect: r })\n      );\n      humanoid(\n        (canvasWidth - 88) / 2 + 32,\n        (canvasHeight - 62) / 2 + 40,\n        1,\n        idiotColors,\n        {\n          bodyless: true,\n        }\n      ).forEach(({ c, r }) =>\n        drawer.rect({ adjusted: false, fillColor: c, rect: r })\n      );\n      humanoid(\n        (canvasWidth - 88) / 2 + 42,\n        (canvasHeight - 62) / 2 + 40,\n        1,\n        runAndGunColors,\n        {\n          bodyless: true,\n        }\n      ).forEach(({ c, r }) =>\n        drawer.rect({ adjusted: false, fillColor: c, rect: r })\n      );\n      humanoid(\n        (canvasWidth - 88) / 2 + 52,\n        (canvasHeight - 62) / 2 + 40,\n        1,\n        aggroColors,\n        {\n          bodyless: true,\n        }\n      ).forEach(({ c, r }) =>\n        drawer.rect({ adjusted: false, fillColor: c, rect: r })\n      );\n      humanoid(\n        (canvasWidth - 88) / 2 + 62,\n        (canvasHeight - 62) / 2 + 35,\n        1,\n        bossColors,\n        {\n          bodyless: true,\n          big: true,\n        }\n      ).forEach(({ c, r }) =>\n        drawer.rect({ adjusted: false, fillColor: c, rect: r })\n      );\n    }\n\n    const drawX = (x, offset = 0) => {\n      drawer.lines({\n        lines: [\n          [x + offset / 2, (canvasHeight - 62) / 2 + 41 - offset],\n          [x + 7 + offset * 3, (canvasHeight - 62) / 2 + 47 + offset],\n        ],\n        strokeColor: \"red\",\n      });\n      drawer.lines({\n        lines: [\n          [x + 7 + offset * 3, (canvasHeight - 62) / 2 + 41 - offset],\n          [x + offset / 2, (canvasHeight - 62) / 2 + 47 + offset],\n        ],\n        strokeColor: \"red\",\n      });\n    };\n\n    if (this.levelOverTimer > delay * 5)\n      if ((this.level.level - 1) % 6 >= 0) drawX((canvasWidth - 88) / 2 + 12);\n    if (this.levelOverTimer > delay * 5.1)\n      if ((this.level.level - 1) % 6 >= 1) drawX((canvasWidth - 88) / 2 + 22);\n    if (this.levelOverTimer > delay * 5.2)\n      if ((this.level.level - 1) % 6 >= 2) drawX((canvasWidth - 88) / 2 + 32);\n    if (this.levelOverTimer > delay * 5.3)\n      if ((this.level.level - 1) % 6 >= 3) drawX((canvasWidth - 88) / 2 + 42);\n    if (this.levelOverTimer > delay * 5.4)\n      if ((this.level.level - 1) % 6 >= 4) drawX((canvasWidth - 88) / 2 + 52);\n    if (this.levelOverTimer > delay * 5.5)\n      if ((this.level.level - 1) % 6 >= 5)\n        drawX((canvasWidth - 88) / 2 + 62, 2);\n  }\n\n  draw(drawer) {\n    this.endOfLevelScreen(drawer);\n\n    if (this.welcomeMessage) {\n      drawer.rect({\n        adjusted: false,\n        fillColor: \"#000\",\n        rect: [0, 0, canvasWidth, canvasHeight],\n      });\n      drawer.text({\n        text: \"Welcome\",\n        size: 4,\n        x: 17,\n        y: 40,\n      });\n      drawer.text({\n        text: \"to space\",\n        size: 4,\n        x: 19,\n        y: 70,\n      });\n    }\n\n    if (this.levelFadeIn < 200) {\n      drawer.rect({\n        adjusted: false,\n        fillColor: `rgba(0,0,0,${1 - this.levelFadeIn / 200})`,\n        rect: [0, 0, canvasWidth, canvasHeight],\n      });\n    }\n\n    const newLevelTimer = delay * (7 + (this.level.level === 1 ? 3 : 0));\n    if (this.levelOverTimer > newLevelTimer - 50) {\n      drawer.rect({\n        adjusted: false,\n        fillColor: `rgba(0,0,0,${\n          1 - (newLevelTimer - this.levelOverTimer) / 50\n        })`,\n        rect: [0, 0, canvasWidth, canvasHeight],\n      });\n    }\n\n    if (this.gameOver) {\n      drawer.rect({\n        adjusted: false,\n        fillColor: \"#000\",\n        rect: [15, 26, 98, 31],\n      });\n      drawer.text({\n        text: \"Game over\",\n        size: 2,\n        x: 25,\n        y: 36,\n      });\n    }\n  }\n}\n\nexport default Level;\n","// prettier-ignore\nconst level1 = [\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n];\n\n// prettier-ignore\nconst level2 = [\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n];\n\n// prettier-ignore\nconst bossLevel = [\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],\n\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n];\n\n// prettier-ignore\nconst level2Hex = [\n  \"ffffffffff\", \"8000000001\", \"8000000001\", \"8000000001\",\n  \"8000000001\", \"87007e00e1\", \"8000000001\", \"8000000001\",\n  \"f03c003c0f\", \"8000000001\", \"8000000001\", \"8300c300c1\",\n  \"8000000001\", \"8000000001\", \"8fc07e03f1\", \"8000000001\",\n  \"8000000001\", \"e00f00f007\", \"8000000001\", \"8000000001\",\n  \"ffffffffff\",\n];\n\n// quads are 10x12\n// prettier-ignore\nconst emptyQuad = [\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n];\n\nconst quad1 = [\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n];\n\nconst mapToHex = (map) => {\n  return map.map((r) => parseInt(r.join(\"\"), 2).toString(16));\n};\n\nconst hexToMap = (hex) => {\n  return hex.map((h) => {\n    return parseInt(h, 16).toString(2).split(\"\").map(Number);\n  });\n};\n\nconst defaultMap = hexToMap(level2Hex);\nconst levels = [\n  defaultMap,\n  defaultMap,\n  defaultMap,\n  defaultMap,\n  defaultMap,\n  bossLevel,\n];\n\nexport default class Map {\n  constructor() {\n    this.drawer = null;\n    this.tileSize = 8;\n    this.mapTiles = [];\n    this.mapHeight = 0;\n    this.mapLength = 0;\n  }\n\n  loadLevel(level, colorScheme) {\n    let tiles;\n    if (level === 1) {\n      tiles = level1;\n    } else {\n      tiles = levels[(level - 1) % 6] || defaultMap;\n    }\n\n    this.mapTiles = tiles;\n    this.mapHeight = tiles.length;\n    this.mapLength = tiles[0].length;\n\n    this.mapWidthPixels = this.tileSize * this.mapLength;\n    this.mapHeightPixels = this.tileSize * this.mapHeight;\n\n    this.colorScheme = colorScheme;\n  }\n\n  getTile(x, y) {\n    const row = this.mapTiles[Math.floor(y / this.tileSize)];\n    if (!row) return 1;\n    return row[Math.floor(x / this.tileSize)];\n  }\n\n  draw(drawer) {\n    const [main, highlight, shadow] = this.colorScheme;\n    this.drawer = this.drawer || drawer;\n    this.mapTiles.forEach((row, y) => {\n      row.forEach((tile, x) => {\n        if (tile !== 1) return;\n        drawer.rect({\n          fillColor: main,\n          rect: [\n            x * this.tileSize + 1,\n            y * this.tileSize + 1,\n            this.tileSize - 2,\n            this.tileSize - 2,\n          ],\n        });\n        drawer.rect({\n          fillColor: highlight,\n          rect: [\n            x * this.tileSize + 1,\n            y * this.tileSize,\n            this.tileSize - 2,\n            1,\n          ],\n        });\n        drawer.rect({\n          fillColor: shadow,\n          rect: [\n            x * this.tileSize + 1,\n            y * this.tileSize + this.tileSize - 1,\n            this.tileSize - 2,\n            1,\n          ],\n        });\n        drawer.rect({\n          fillColor: highlight,\n          rect: [\n            x * this.tileSize,\n            y * this.tileSize + 1,\n            1,\n            this.tileSize - 2,\n          ],\n        });\n        drawer.rect({\n          fillColor: shadow,\n          rect: [\n            x * this.tileSize + this.tileSize - 1,\n            y * this.tileSize + 1,\n            1,\n            this.tileSize - 2,\n          ],\n        });\n      });\n    });\n  }\n}\n","// https://sb.bitsnbites.eu/?data=U0JveAwC7d1NbxtFGMDxZ3Z2Q4QbSpGCGokIS1VVEAcqgUQPrYrkHLkhTgj1wq2hEkkQDn1blcVms1FleeM4hDQBilAFR45IgHrjK3DiG3DhHmbWa0NNvCPRbGLD_7c7b35mrNn15jTaSTwrMifVaXk3FPVLKMb0cyZ76Cs999PyH-nUS36gPE8Z2leePUSeyEVRo9FsRlEcN5u2liS2FscN-UQi-VjKNuuIn3fER80_SWz7zh3H8DJVZhwdnnfEJ8FeXu7m5b283Pl8-7Ot7mbngCGHatQ9nukdlfkR8aq8KPMyd_K4n5-ZyuypgvApM8f3C-IP63klyst-e_GAzuMoajXaUauZRq24E7WS7vpW0o07SXdtM-4000bbNf64Ld2SW0vmHC5XQglXZGnVNR4AAAAAAAAAUJL9D5TsXxMl_tSZ3ifeU0qdeyOwVaXt4Q1q_TLNOqZ5-nv-12fjbPxnWGz4fg-1J_3yAAAAAAAAAAAAjsF6L130n1wwtR8CUb83pboYPO2LKOVpT5uK2NLTIkHGjusvzWzkZTpUlsn1PtYZR9xK86luPNI-mlW_Uueflr9q9rjzL32CDq75Lzji_XudZ-lw2zH8sbnm77r_AAAAAAAAAADgn7yfQ5PWnxG5urxm2p8Gypt-59kLG8Fb01o81dubcfioy2Rj_qU67YhfcMQBAAAAAAAAAACOnJbbohdui_q1Ii-IqNd85dWWb_xYmzqnTDhbI9Om0v_PZsq3hx05_G7ZUb5rdhj6uxpO4vwnYY4uBc_Pf-HyAAAAAAAAAADAhNFvhyJXwhMiJ6TW-8jbPynVN_Ur2drYYLXM01kpEviBvyPytch9-XLwPbuyZ1p7WbltUrkC1xZ1teJwK1uZ6Uh38Imtb5nUzdbRkoKx42AnP7eld25J7-xm19U2PbqSXYytt23WsqfJ7oq5uNj1_S6BI64d8fvm8fnG5KPKsrkenzlH_IF8K9-ZvF_uZU_-rtwzx479aY6X6_Icfx0AAAAAAAAAAPxPtddF_RZqkUtyWUR_Hyh99iupbeqznqh-J_u-We-tM79wweQjWZW6fFjUZexce-_RdtSqLx7c8_BUHLErBfF5k64XxI-CYwvG068Wx2u9HSbrI3eavJ7no67zZp7fHBF3Kbr_VtH9t1w7ZLp-n387bwAAAAAAAAAAUB5vbcWk0Bd5-fzVG1oSX-nXv9DV1F8drI8NFs8GNdfbNA8ccQAAAAAAAAAAAGCc_Ak\n\nimport Worker from \"./sound-box.worker.js\";\n\nvar myWorker = new Worker();\n\nlet audio = null;\n\nmyWorker.onmessage = (e) => {\n  let wave = e.data;\n  audio = document.createElement(\"audio\");\n  audio.src = URL.createObjectURL(new Blob([wave], { type: \"audio/wav\" }));\n  audio.volume = 0.7;\n  audio.loop = true;\n};\n\nexport default class Music {\n  constuctor() {}\n\n  startMusic() {\n    let playPromise = audio.play();\n    (function tryAgain(playPromise) {\n      playPromise\n        .then((_) => {})\n        .catch((error) => {\n          setTimeout(() => {\n            let playPromise = audio.play();\n            tryAgain(playPromise);\n          }, 1000);\n        });\n    })(playPromise);\n  }\n}\n","import GameObject from \"./GameObject\";\nimport WeaponFactory from \"./WeaponFactory\";\n\nclass Package extends GameObject {\n  constructor(x, y, weapon) {\n    super({ x, y });\n\n    this.weapon = weapon || new WeaponFactory().random();\n    this.size = 5;\n    this.grav = 0.04;\n    this.dy = 0.4;\n    this.landed = false;\n    this.type = weapon || Math.random() < 0.66 ? \"weapon\" : \"health\";\n  }\n\n  tick() {\n    if (this.landed) return;\n    this.dy += this.grav;\n    this.y += this.dy;\n  }\n\n  draw(drawer) {\n    if (this.type === \"weapon\") {\n      drawer.rect({\n        fillColor: \"#C3732A\",\n        rect: [this.x, this.y, 5, 5],\n      });\n\n      [\n        [0, 1],\n        [1, 0],\n        [2, 0],\n        [3, 0],\n        [4, 1],\n        [3, 2],\n        [2, 2],\n        [2, 4],\n      ].forEach(([x, y]) =>\n        drawer.rect({\n          fillColor: \"yellow\",\n          rect: [this.x + x, this.y + y, 1, 1],\n        })\n      );\n    } else {\n      drawer.rect({\n        fillColor: \"#FFF\",\n        rect: [this.x, this.y, 5, 5],\n      });\n\n      [\n        [1, 2, 3, 1],\n        [2, 1, 1, 3],\n      ].forEach(([x, y, dx, dy]) =>\n        drawer.rect({\n          fillColor: \"red\",\n          rect: [this.x + x, this.y + y, dx, dy],\n        })\n      );\n    }\n  }\n}\n\nexport default Package;\n","import Package from \"./Package\";\n\nclass PackageCollection {\n  constructor() {\n    this.packages = [];\n    this.lifespan = 0;\n  }\n\n  tick(map, level) {\n    this.lifespan += 1;\n    if (!(this.lifespan % 500) && level !== 1) {\n      let x = Math.random() * map.mapWidthPixels;\n      let y = Math.random() * map.mapHeightPixels;\n      while (map.getTile(x, y + 1)) {\n        x = Math.random() * map.mapWidthPixels;\n        y = Math.random() * map.mapHeightPixels;\n      }\n      this.packages.push(new Package(x, y));\n    }\n    this.packages.forEach((p) => p.tick());\n  }\n\n  draw(drawer) {\n    this.packages.forEach((p) => p.draw(drawer));\n  }\n}\n\nexport default PackageCollection;\n","import Character from \"./Character\";\nimport { humanoid } from \"./Sprites.js\";\nimport Blood from './Blood';\nimport BloodChunk from './BloodChunk';\nimport WeaponFactory, { assaultRifle, debugPistol } from \"./WeaponFactory\";\n\nexport default class Player extends Character {\n  constructor(x, y, health) {\n    super(x, y, health);\n    this.bloodColor = \"red\";\n    this.weapon = null;\n    // this.weapon = new WeaponFactory().create(debugPistol);\n    this.dead = false;\n  }\n\n  tick({ camera, keyboard, map, projectiles, sound, spurts, chunks }) {\n    if (this.health <= 0 && !this.dead) {\n      for (let i = 0; i < 200; i++) {\n        spurts.add(\n          new Blood(\n            this.x,\n            this.y,\n            Math.random() * 5 - 2.5,\n            Math.random() * 5 - 5,\n            \"red\",\n          )\n        );\n      }\n      for (let i = 0; i < 10; i++) {\n        chunks.chunks.push(\n          new BloodChunk(\n            this.x,\n            this.y - 2,\n            Math.random() * 3 - 1.5,\n            Math.random() * 3 - 1.5,\n            \"red\"\n          )\n        );\n      }\n      this.dead = true;\n    }\n    if (this.dead) return;\n\n    Character.tick.call(this, {\n      camera,\n      map,\n      projectiles,\n      presses: {\n        left: keyboard.isDown(keyboard.LEFT),\n        right: keyboard.isDown(keyboard.RIGHT),\n        up: keyboard.isDown(keyboard.UP),\n        space: keyboard.isDown(keyboard.SPACE),\n      },\n      sound,\n    });\n  }\n\n  draw(drawer) {\n    if (this.dead) return;\n    // drawer.rect({ fillColor: \"green\", rect: [this.x, this.y, 8, 8] }); // hitbox\n\n    const colors = {\n      skin: \"#FFCCAA\",\n      hair: \"#FFA300\",\n      eyes: \"#008751\",\n      body: \"#29ADFF\",\n    };\n\n    humanoid(this.x, this.y, this.facing, colors).forEach(({ c, r }) =>\n      drawer.rect({ fillColor: c, rect: r })\n    );\n\n    this.weapon && this.weapon.draw(drawer, { x: this.x, y: this.y, facing: this.facing });\n  }\n}\n","class Projectile {\n  constructor(\n    { x, y, facing },\n    {\n      color,\n      speed,\n      spreadX = 0,\n      spreadY = 0,\n      lift = 0,\n      grav = 0,\n      damage,\n      damageMod,\n      explosion,\n      blood,\n      size,\n      emoji,\n    },\n    owner\n  ) {\n    this.size = size || 1;\n    this.x = x - this.size / 2;\n    this.y = y;\n    this.dx = facing * speed + (Math.random() - spreadX / 2) * spreadX;\n    this.dy = (Math.random() - spreadY / 2) * spreadY - lift;\n    this.grav = grav;\n    this.color = color;\n    this.explosion = explosion || 1;\n    this.lifespan = 0;\n    this.shouldDie = false;\n    this.exploding = false;\n    this.lifeleft = null;\n    this.damage = damage;\n    this.damageMod = damageMod || 1;\n    this.blood = blood;\n    this.emoji = emoji;\n    this.owner = owner;\n  }\n\n  destroy() {\n    this.exploding = true;\n    this.lifeleft = 2;\n  }\n\n  tick() {\n    this.lifespan += 1;\n    if (this.lifeleft) {\n      this.lifeleft -= 1;\n      if (this.lifeleft === 0) this.shouldDie = true;\n    }\n    if (this.exploding) return;\n\n    this.x += this.dx;\n    this.dy += this.grav;\n    this.y += this.dy;\n  }\n\n  draw(drawer) {\n    if (this.exploding) {\n      drawer.arc({\n        arc: [\n          this.x,\n          this.y,\n          (2 / this.lifeleft) * this.explosion,\n          0,\n          2 * Math.PI,\n        ],\n        fillColor: \"#ff8\",\n        shadowBlur: 10,\n        shadowColor: \"#ff0\",\n      });\n    } else {\n      if (this.emoji) {\n        drawer.emoji({ x: this.x, y: this.y, emoji: this.emoji });\n      } else if (this.size === 1) {\n        drawer.rect({\n          fillColor: this.color(),\n          rect: [this.x, this.y, this.size, this.size],\n        });\n      } else {\n        drawer.arc({\n          arc: [this.x, this.y, this.size, 0, 2 * Math.PI],\n          fillColor: this.color(),\n          shadowBlur: this.size,\n          shadowColor: \"#ff0\",\n        });\n      }\n    }\n  }\n}\n\nexport default Projectile;\n","class ProjectileCollection {\n  constructor() {\n    this.projectiles = [];\n  }\n\n  add(p) {\n    this.projectiles.push(p);\n  }\n\n  tick() {\n    this.projectiles.map((p) => p.tick());\n    this.projectiles = this.projectiles.filter((p) => !p.shouldDie);\n  }\n\n  draw(drawer) {\n    this.projectiles.map((p) => p.draw(drawer));\n  }\n}\n\nexport default ProjectileCollection;\n","import { zzfx } from \"zzfx\";\n\n// prettier-ignore\nlet sounds = {\n  \"death\": [2.45,,608,.02,.09,.38,2,1.24,.6,,,,,.3,,.4,.03,.51,.05],\n  \"gun\": [0.4,0,0,,,0,4,0,500,,,,,,,.1,,0,.15],\n  \"jump\": [,,131,.02,.02,.08,,1.49,2.3,,,,,,,,,.9,.1],\n  \"message\": [,0,1740,,.06,.29,,.77,,,,,,,,,,.76,.07,.06],\n  \"minigun\": [0.6,0,0,,,0,4,0,1e8,,,,,,,.04,,0,.08],\n  \"pickup\": [,,548,.08,.36,.47,1,1.79,,,236,.03,.08,,,,,.83],\n  \"shotgun\": [0.8,,300,,,.9,4,.5,,,,,,10,74,.2,,2],\n  \"sniper\": [0.8,,300,,,1.2,4,.5,,,,,,10,74,.1,,2],\n  \"thrown\": [,0,0,,,0,4,0,1e8,,,,,,,.055,,0,.3],\n};\n\nexport default class Sound {\n  play(sound) {\n    zzfx(...sounds[sound]);\n  }\n}\n","export const humanoid = (x, y, facing, colors, options = {}) => {\n  const { skin, hair, horns, eyes, body } = colors;\n  let parts = [];\n\n  let upper = [\n    [skin, [1, 3, 5, 3]], // head\n    [eyes, [2, 4, 1, 1]], // eye left\n    [eyes, [5, 4, 1, 1]], // eye right\n  ];\n  parts = parts.concat(upper);\n\n  let lower = [\n    [body, [1, 7, 3, 1]], // body\n    [skin, [1, 7, 1, 1]], // left arm\n    [skin, [4, 7, 1, 1]], // right arm\n  ];\n\n  if (!options.bodyless) {\n    parts = parts.concat(lower);\n  }\n\n  if (hair)\n    parts = parts.concat([\n      [hair, [2, 1, 4, 1]], // hair top\n      [hair, [1, 2, 6, 1]], // hair bottom\n    ]);\n\n  if (horns)\n    parts = parts.concat([\n      [horns, [1, 2, 1, 1]], // horn left\n      [horns, [5, 2, 1, 1]], // horn right\n    ]);\n\n  const mult = options.huge ? 12 : options.big ? 2 : 1;\n  // prettier-ignore\n  parts = parts.map(([c, r]) => ({\n    c,\n    r: [facing === 1 ? x + (r[0] * mult) : 8 * mult - ((r[0] + r[2]) * mult) + x, y + r[1] * mult, r[2] * mult, r[3] * mult],\n  }));\n\n  return parts;\n};\n","import Projectile from \"./Projectile\";\n\nclass Weapon {\n  constructor({\n    name,\n    cooldown,\n    cooldownMod = 1,\n    payloadCount,\n    knockback,\n    shake,\n    sound,\n    projectileConfig,\n  }) {\n    this.name = name;\n    this.cooldown = cooldown;\n    this.cooldownMod = cooldownMod;\n    this.payloadCount = payloadCount;\n    this.knockback = knockback;\n    this.shake = shake;\n    this.sound = sound;\n    this.projectileConfig = projectileConfig;\n\n    this.ticksSinceLastFired = cooldown;\n    this.shooting = false;\n  }\n\n  tick(pressSpace, projectiles, location, camera, sound, owner) {\n    this.ticksSinceLastFired += 1;\n    this.shooting = false;\n    if (\n      this.cooldown * this.cooldownMod < this.ticksSinceLastFired &&\n      pressSpace\n    ) {\n      this.fire(projectiles, location, owner);\n      sound.play(this.sound);\n      if (this.shake) camera.shake(this.shake.force, this.shake.duration);\n      this.shooting = true;\n      return this.knockback;\n    }\n    return 0;\n  }\n\n  fire(projectiles, location, owner) {\n    this.ticksSinceLastFired = 0;\n    for (let i = 0; i < this.payloadCount; i++) {\n      const p = new Projectile(location, this.projectileConfig, owner);\n      projectiles.add(p);\n    }\n  }\n\n  draw(drawer, character) {\n    if (this.shooting) {\n      // prettier-ignore\n      [\n        [character.x + (character.facing === 1 ? 8 : -1), character.y + 3, 1, 1],\n        [character.x + (character.facing === 1 ? 7 : 0), character.y + 4, 2, 3],\n      ].forEach(([x, y, dx, dy]) =>\n        drawer.rect({\n          fillColor: \"yellow\",\n          rect: [x, y, dx, dy],\n        })\n      );\n\n      // prettier-ignore\n      [\n        [character.x + (character.facing === 1 ? 8 : -1), character.y + 4, 2, 2],\n        [character.x + (character.facing === 1 ? 10 : -3), character.y + 4, 1, 1],\n      ].forEach(([x, y, dx, dy]) =>\n        drawer.rect({\n          fillColor: \"white\",\n          rect: [x, y, dx, dy],\n        })\n      );\n    }\n  }\n}\n\nexport default Weapon;\n","import Weapon from \"./Weapon\";\n\n// base weapons\nexport const debugPistol = {\n  name: \"Debug Pistol\",\n  cooldown: 2,\n  payloadCount: 1,\n  knockback: 0,\n  shake: { force: 1, duration: 2 },\n  sound: \"minigun\",\n  projectileConfig: {\n    color: () => \"#eee\",\n    speed: 3,\n    spreadX: 1,\n    spreadY: 0.3,\n    damage: 100,\n    blood: 5,\n  },\n};\n\nexport const pistol = {\n  name: \"Pistol\",\n  cooldown: 10,\n  payloadCount: 1,\n  knockback: 0,\n  sound: \"gun\",\n  projectileConfig: {\n    color: () => \"#eee\",\n    speed: 3,\n    spreadX: 0,\n    spreadY: 0.15,\n    damage: 10,\n    blood: 5,\n  },\n};\n\nexport const minigun = {\n  name: \"Minigun\",\n  cooldown: 2,\n  payloadCount: 1,\n  knockback: 0.2,\n  shake: { force: 1, duration: 2 },\n  sound: \"minigun\",\n  projectileConfig: {\n    color: () => \"#fff\",\n    speed: 4,\n    spreadX: 1,\n    spreadY: 0.3,\n    damage: 2,\n    blood: 5,\n  },\n};\n\nexport const assaultRifle = {\n  name: \"Assault Rifle\",\n  cooldown: 8,\n  payloadCount: 1,\n  knockback: 0.1,\n  sound: \"gun\",\n  projectileConfig: {\n    color: () => \"#fff\",\n    speed: 3,\n    spreadX: 0,\n    spreadY: 0.3,\n    damage: 4,\n    blood: 5,\n  },\n};\n\nexport const shotgun = {\n  name: \"Shotgun\",\n  cooldown: 30,\n  payloadCount: 12,\n  knockback: 1,\n  shake: { force: 2, duration: 8 },\n  sound: \"shotgun\",\n  projectileConfig: {\n    color: () => \"yellow\",\n    speed: 4,\n    spreadX: 0.7,\n    spreadY: 1,\n    damage: 1,\n    blood: 5,\n  },\n};\n\nconst superShotgun = {\n  name: \"Super Shotgun\",\n  cooldown: 60,\n  payloadCount: 24,\n  knockback: 2,\n  shake: { force: 3, duration: 8 },\n  sound: \"shotgun\",\n  projectileConfig: {\n    color: () => \"yellow\",\n    speed: 4,\n    spreadX: 1,\n    spreadY: 1.5,\n    damage: 1,\n    blood: 5,\n  },\n};\n\nexport const sniperRifle = {\n  name: \"sniper rifle\",\n  cooldown: 60,\n  payloadCount: 1,\n  knockback: 2,\n  shake: { force: 3, duration: 8 },\n  sound: \"sniper\",\n  projectileConfig: {\n    color: () => \"#eee\",\n    speed: 6,\n    spreadX: 0,\n    spreadY: 0,\n    damage: 20,\n    blood: 50,\n  },\n};\n\nconst flameThrower = {};\n\nexport const grenade = {\n  name: \"Grenade\",\n  cooldown: 40,\n  payloadCount: 1,\n  knockback: 0,\n  sound: \"thrown\",\n  projectileConfig: {\n    emoji: \"💣\",\n    speed: 3,\n    lift: 1.5,\n    grav: 0.1,\n    explosion: 3,\n    size: 3,\n    damage: 12,\n    blood: 5,\n  },\n};\n\n// cooldown\nconst slowCooldown = { cooldown: 2, damage: 2 };\nconst fastCooldown = { cooldown: 0.5, damage: 0.5 };\n\nconst knockback = { knockback: 1 };\n\nconst sniper = { cooldown: 3, damage: 5, speed: 2 };\n\n// attributes\nconst rainbow = {\n  prefix: \"Rainbow\",\n  projectileConfig: {\n    color: () =>\n      [\"#FF0000\", \"#FFAC00\", \"#FFF100\", \"#0BFF00\", \"#00F6FF\"][\n        Math.floor(Math.random() * 6)\n      ],\n  },\n};\n\nconst collosal = {\n  prefix: \"Collosal\",\n  cooldownMod: 3,\n  projectileConfig: {\n    color: () => \"yellow\",\n    damageMod: 3,\n    explosion: 5,\n    size: 5,\n  },\n};\n\nconst shrimp = {\n  prefix: \"Shrimp\",\n  projectileConfig: { emoji: \"🍤\", explosion: 3, size: 3 },\n};\nconst bomb = {\n  prefix: \"Bomb\",\n  projectileConfig: { emoji: \"💣\", explosion: 3, size: 3 },\n};\n\nconst attributes = [rainbow, collosal, shrimp, bomb];\nconst randomAttribute = () =>\n  attributes[Math.floor(Math.random() * attributes.length)];\n\nclass WeaponFactory {\n  constructor() {}\n\n  create(base) {\n    const attribute =\n      Math.random() > 0.9 ? randomAttribute() : { projectileConfig: {} };\n    const projectileConfig = {\n      ...base.projectileConfig,\n      ...attribute.projectileConfig,\n    };\n    const final = {\n      ...base,\n      ...attribute,\n      projectileConfig,\n      name: `${attribute.prefix ? `${attribute.prefix} ` : \"\"}${base.name}`,\n    };\n    return new Weapon(final);\n  }\n\n  random() {\n    const guns = [\n      pistol,\n      assaultRifle,\n      minigun,\n      shotgun,\n      superShotgun,\n      sniperRifle,\n      grenade,\n    ];\n    // const guns = [sniperRifle];\n    const base = guns[Math.floor(Math.random() * guns.length)];\n    return this.create(base);\n  }\n}\n\nexport default WeaponFactory;\n","const offset = 1;\n\nexport const collideSide = (player, map) => {\n  let { x, y, dx, size } = player;\n\n  if (dx > 0) {\n    const rightTopTileType = map.getTile(x + size, y);\n    const rightBottomTileType = map.getTile(x + size, y + size - offset);\n    if (rightTopTileType || rightBottomTileType) {\n      player.dx = 0;\n      player.x = Math.floor(x / 8) * 8;\n    }\n  } else if (dx < 0) {\n    const leftTopTileType = map.getTile(x, y);\n    const leftBottomTileType = map.getTile(x, y + size - offset);\n    if (leftTopTileType || leftBottomTileType) {\n      player.dx = 0;\n      player.x = Math.floor(x / 8) * 8 + 8;\n    }\n  }\n};\n\nexport const collideFloor = (player, map) => {\n  const { x, y, dy, size } = player;\n\n  if (dy < 0) return false;\n\n  const leftBottomTileType = map.getTile(x, y + size);\n  const rightBottomTileType = map.getTile(x + size - offset, y + size);\n\n  if (leftBottomTileType || rightBottomTileType) {\n    player.dy = 0;\n    player.y = Math.floor(y / 8) * 8;\n    player.grounded = true;\n    player.airtime = 0;\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const collideRoof = (player, map) => {\n  const { x, y, size } = player;\n  const leftTopTileType = map.getTile(x, y);\n  const rightTopTileType = map.getTile(x + size - offset, y);\n\n  if (leftTopTileType || rightTopTileType) {\n    player.dy = 0;\n    player.y = Math.floor((y - size / 2) / 8) * 8 + 8 + size / 2;\n    player.jumpHoldTime = 0;\n  }\n};\n","export const canvasWidth = 160;\nexport const canvasHeight = 160;\n","import WeaponFactory, { assaultRifle } from \"./WeaponFactory\";\n\nimport { aggro, runAndGun, idiot, pacifist, sentinel } from \"./EnemyPersonas\";\n\nexport const makeColors = ([skin, horns, eyes, body]) => ({\n  skin,\n  horns,\n  eyes,\n  body,\n});\n\n// prettier-ignore\nexport const sentinelColors = makeColors([\"#50c878\", \"#50c878\", \"#c00\", \"#a00\"]);\nexport const pacifistColors = makeColors([\"beige\", \"beige\", \"red\", \"red\"]);\n// prettier-ignore\nexport const idiotColors = makeColors([\"#919\", \"#919\", \"#be0\", \"#f58\"]);\n// prettier-ignore\nexport const runAndGunColors = makeColors([\"#4cc9f0\", \"#4cc9f0\", \"#f72585\", \"#4361ee\"]);\nexport const aggroColors = makeColors([\"#dd0\", \"#dd0\", \"#09f\", \"#a30\"]);\nexport const bossColors = makeColors([\"#a00\", \"#a00\", \"yellow\", \"#a60\"]);\n\nexport default {\n  sentinel: {\n    type: \"sentinel\",\n    health: 22,\n    persona: sentinel,\n    colors: sentinelColors,\n    weapon: new WeaponFactory().create(assaultRifle),\n  },\n  pacifist: {\n    type: \"pacifist\",\n    health: 22,\n    persona: pacifist,\n    colors: pacifistColors,\n  },\n  idiot: { type: \"idiot\", health: 22, persona: idiot, colors: idiotColors },\n  runAndGun: {\n    type: \"runAndGun\",\n    health: 22,\n    persona: runAndGun,\n    colors: runAndGunColors,\n  },\n  aggro: { type: \"aggro\", health: 22, persona: aggro, colors: aggroColors },\n  boss: {\n    type: \"boss\",\n    health: 400,\n    persona: sentinel,\n    colors: bossColors,\n  },\n};\n","import Drawer from \"./Drawer\";\nimport GameContainer from \"./GameContainer\";\nimport Keyboard from \"./Keyboard\";\nimport Sound from \"./Sound\";\nimport CollisionDetector from \"./CollisionDetector\";\n\nimport Background from \"./Background\";\nimport Level from \"./Level\";\nimport Map from \"./Map\";\nimport HUD from \"./HUD\";\nimport Player from \"./Player\";\nimport EnemyCollection from \"./EnemyCollection\";\nimport ProjectileCollection from \"./ProjectileCollection\";\nimport BloodCollection from \"./BloodCollection\";\nimport PackageCollection from \"./PackageCollection\";\n\nwindow.onload = () => {\n  let gameContainer = new GameContainer();\n\n  let drawer = new Drawer(gameContainer.canvas);\n  let keyboard = new Keyboard();\n  let sound = new Sound();\n  let collisionDetector = new CollisionDetector();\n\n  let background = new Background({\n    cw: gameContainer.canvas.width,\n    ch: gameContainer.canvas.height,\n  });\n\n  let level = new Level();\n  let map = new Map();\n  let hud = new HUD();\n  let player = new Player(10, 10, 350);\n  let enemies = new EnemyCollection();\n  let projectiles = new ProjectileCollection();\n  let spurts = new BloodCollection();\n  let chunks = { chunks: [] };\n  let packages = new PackageCollection();\n\n  gameContainer.initialize();\n  level.initializeLevel(3, {\n    player,\n    enemies,\n    chunks,\n    spurts,\n    packages,\n    map,\n    background,\n  });\n\n  let fps = 60,\n    interval = 1000 / fps,\n    lastTime = 0,\n    delta = 0;\n\n  let gameLoop = (currentTime) => {\n    window.requestAnimationFrame(gameLoop);\n    if (currentTime - lastTime) {\n      tick();\n      collisionDetection();\n      drawer.clearBackground();\n      drawObjects().map((object) => object.draw(drawer));\n      lastTime = currentTime - (delta % interval);\n    }\n  };\n\n  let tick = () => {\n    const { camera } = drawer;\n    level.tick({\n      player,\n      enemies,\n      chunks,\n      spurts,\n      packages,\n      sound,\n      map,\n      background,\n    });\n    player.tick({ camera, keyboard, map, projectiles, sound, chunks, spurts });\n    enemies.tick({ camera, map, projectiles, spurts, chunks, player, sound });\n    camera.tick({ player, map });\n    projectiles.tick();\n    spurts.tick();\n\n    if (chunks.chunks.length > 1000) {\n      chunks.chunks = chunks.chunks.slice(chunks.chunks.length - 1000);\n    }\n    chunks.chunks.forEach((chunk) => chunk.tick());\n\n    hud.tick(player, enemies, level.level.enemyColor);\n    packages.tick(map, level.level.level);\n  };\n\n  let collisionDetection = () => {\n    projectiles.projectiles\n      .filter((p) => !p.exploding)\n      .forEach((projectile) => {\n        // map\n        if (map.getTile(projectile.x, projectile.y)) {\n          projectile.destroy();\n        }\n\n        // characters\n        enemies.enemies.concat([player]).forEach((object) => {\n          collisionDetector.handleProjectile(projectile, object, spurts);\n        });\n      });\n\n    spurts.spurts.concat(chunks.chunks).forEach((item) => {\n      if (map.getTile(item.x, item.y)) item.stick();\n    });\n\n    packages.packages.forEach((packge) => {\n      // map\n      if (map.getTile(packge.x, packge.y + packge.size)) {\n        packge.landed = true;\n      }\n\n      // characters\n      enemies.enemies.concat([player]).forEach((object) => {\n        collisionDetector.handlePackage(packge, object, packages);\n      });\n    });\n  };\n\n  let drawObjects = () => [\n    background,\n    map,\n    enemies,\n    player,\n    packages,\n    projectiles,\n    spurts,\n    ...chunks.chunks,\n    hud,\n    level,\n  ];\n\n  document.querySelector(\"div\").className += \" loaded\";\n  gameLoop();\n};\n","module.exports = function() {\n  return require(\"!!/Users/matthewdiamant/Projects/space/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = \\\"./src/sound-box.worker.js\\\");\\n/******/ })\\n/************************************************************************/\\n/******/ ({\\n\\n/***/ \\\"./src/sound-box.worker.js\\\":\\n/*!*********************************!*\\\\\\n  !*** ./src/sound-box.worker.js ***!\\n  \\\\*********************************/\\n/*! exports provided: default */\\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n__webpack_require__.r(__webpack_exports__);\\n/* -*- mode: javascript; tab-width: 4; indent-tabs-mode: nil; -*-\\n *\\n * Copyright (c) 2011-2013 Marcus Geelnard\\n *\\n * This software is provided 'as-is', without any express or implied\\n * warranty. In no event will the authors be held liable for any damages\\n * arising from the use of this software.\\n *\\n * Permission is granted to anyone to use this software for any purpose,\\n * including commercial applications, and to alter it and redistribute it\\n * freely, subject to the following restrictions:\\n *\\n * 1. The origin of this software must not be misrepresented; you must not\\n *    claim that you wrote the original software. If you use this software\\n *    in a product, an acknowledgment in the product documentation would be\\n *    appreciated but is not required.\\n *\\n * 2. Altered source versions must be plainly marked as such, and must not be\\n *    misrepresented as being the original software.\\n *\\n * 3. This notice may not be removed or altered from any source\\n *    distribution.\\n *\\n */\\n\\n\\n\\nlet Soundbox = function () {\\n  //--------------------------------------------------------------------------\\n  // Private methods\\n  //--------------------------------------------------------------------------\\n\\n  // Oscillators\\n  var osc_sin = function (value) {\\n    return Math.sin(value * 6.283184);\\n  };\\n\\n  var osc_saw = function (value) {\\n    return 2 * (value % 1) - 1;\\n  };\\n\\n  var osc_square = function (value) {\\n    return value % 1 < 0.5 ? 1 : -1;\\n  };\\n\\n  var osc_tri = function (value) {\\n    var v2 = (value % 1) * 4;\\n    if (v2 < 2) return v2 - 1;\\n    return 3 - v2;\\n  };\\n\\n  var getnotefreq = function (n) {\\n    // 174.61.. / 44100 = 0.003959503758 (F3)\\n    return 0.003959503758 * Math.pow(2, (n - 128) / 12);\\n  };\\n\\n  var createNote = function (instr, n, rowLen) {\\n    var osc1 = mOscillators[instr.i[0]],\\n      o1vol = instr.i[1],\\n      o1xenv = instr.i[3],\\n      osc2 = mOscillators[instr.i[4]],\\n      o2vol = instr.i[5],\\n      o2xenv = instr.i[8],\\n      noiseVol = instr.i[9],\\n      attack = instr.i[10] * instr.i[10] * 4,\\n      sustain = instr.i[11] * instr.i[11] * 4,\\n      release = instr.i[12] * instr.i[12] * 4,\\n      releaseInv = 1 / release,\\n      arp = instr.i[13],\\n      arpInterval = rowLen * Math.pow(2, 2 - instr.i[14]);\\n\\n    var noteBuf = new Int32Array(attack + sustain + release);\\n\\n    // Re-trig oscillators\\n    var c1 = 0,\\n      c2 = 0;\\n\\n    // Local variables.\\n    var j, j2, e, t, rsample, o1t, o2t;\\n\\n    // Generate one note (attack + sustain + release)\\n    for (j = 0, j2 = 0; j < attack + sustain + release; j++ , j2++) {\\n      if (j2 >= 0) {\\n        // Switch arpeggio note.\\n        arp = (arp >> 8) | ((arp & 255) << 4);\\n        j2 -= arpInterval;\\n\\n        // Calculate note frequencies for the oscillators\\n        o1t = getnotefreq(n + (arp & 15) + instr.i[2] - 128);\\n        o2t =\\n          getnotefreq(n + (arp & 15) + instr.i[6] - 128) *\\n          (1 + 0.0008 * instr.i[7]);\\n      }\\n\\n      // Envelope\\n      e = 1;\\n      if (j < attack) {\\n        e = j / attack;\\n      } else if (j >= attack + sustain) {\\n        e -= (j - attack - sustain) * releaseInv;\\n      }\\n\\n      // Oscillator 1\\n      t = o1t;\\n      if (o1xenv) {\\n        t *= e * e;\\n      }\\n      c1 += t;\\n      rsample = osc1(c1) * o1vol;\\n\\n      // Oscillator 2\\n      t = o2t;\\n      if (o2xenv) {\\n        t *= e * e;\\n      }\\n      c2 += t;\\n      rsample += osc2(c2) * o2vol;\\n\\n      // Noise oscillator\\n      if (noiseVol) {\\n        rsample += (2 * Math.random() - 1) * noiseVol;\\n      }\\n\\n      // Add to (mono) channel buffer\\n      noteBuf[j] = (80 * rsample * e) | 0;\\n    }\\n\\n    return noteBuf;\\n  };\\n\\n  //--------------------------------------------------------------------------\\n  // Private members\\n  //--------------------------------------------------------------------------\\n\\n  // Array of oscillator functions\\n  var mOscillators = [osc_sin, osc_square, osc_saw, osc_tri];\\n\\n  // Private variables set up by init()\\n  var mSong, mLastRow, mCurrentCol, mNumWords, mMixBuf;\\n\\n  //--------------------------------------------------------------------------\\n  // Initialization\\n  //--------------------------------------------------------------------------\\n\\n  this.init = function (song) {\\n    // Define the song\\n    mSong = song;\\n\\n    // Init iteration state variables\\n    mLastRow = song.endPattern;\\n    mCurrentCol = 0;\\n\\n    // Prepare song info\\n    mNumWords = song.rowLen * song.patternLen * (mLastRow + 1) * 2;\\n\\n    // Create work buffer (initially cleared)\\n    mMixBuf = new Int32Array(mNumWords);\\n  };\\n\\n  //--------------------------------------------------------------------------\\n  // Public methods\\n  //--------------------------------------------------------------------------\\n\\n  // Generate audio data for a single track\\n  this.generate = function () {\\n    // Local variables\\n    var i,\\n      j,\\n      b,\\n      p,\\n      row,\\n      col,\\n      n,\\n      cp,\\n      k,\\n      t,\\n      lfor,\\n      e,\\n      x,\\n      rsample,\\n      rowStartSample,\\n      f,\\n      da;\\n\\n    // Put performance critical items in local variables\\n    var chnBuf = new Int32Array(mNumWords),\\n      instr = mSong.songData[mCurrentCol],\\n      rowLen = mSong.rowLen,\\n      patternLen = mSong.patternLen;\\n\\n    // Clear effect state\\n    var low = 0,\\n      band = 0,\\n      high;\\n    var lsample,\\n      filterActive = false;\\n\\n    // Clear note cache.\\n    var noteCache = [];\\n\\n    // Patterns\\n    for (p = 0; p <= mLastRow; ++p) {\\n      cp = instr.p[p];\\n\\n      // Pattern rows\\n      for (row = 0; row < patternLen; ++row) {\\n        // Execute effect command.\\n        var cmdNo = cp ? instr.c[cp - 1].f[row] : 0;\\n        if (cmdNo) {\\n          instr.i[cmdNo - 1] = instr.c[cp - 1].f[row + patternLen] || 0;\\n\\n          // Clear the note cache since the instrument has changed.\\n          if (cmdNo < 16) {\\n            noteCache = [];\\n          }\\n        }\\n\\n        // Put performance critical instrument properties in local variables\\n        var oscLFO = mOscillators[instr.i[15]],\\n          lfoAmt = instr.i[16] / 512,\\n          lfoFreq = Math.pow(2, instr.i[17] - 9) / rowLen,\\n          fxLFO = instr.i[18],\\n          fxFilter = instr.i[19],\\n          fxFreq = (instr.i[20] * 43.23529 * 3.141592) / 44100,\\n          q = 1 - instr.i[21] / 255,\\n          dist = instr.i[22] * 1e-5,\\n          drive = instr.i[23] / 32,\\n          panAmt = instr.i[24] / 512,\\n          panFreq = (6.283184 * Math.pow(2, instr.i[25] - 9)) / rowLen,\\n          dlyAmt = instr.i[26] / 255,\\n          dly = (instr.i[27] * rowLen) & ~1; // Must be an even number\\n\\n        // Calculate start sample number for this row in the pattern\\n        rowStartSample = (p * patternLen + row) * rowLen;\\n\\n        // Generate notes for this pattern row\\n        for (col = 0; col < 4; ++col) {\\n          n = cp ? instr.c[cp - 1].n[row + col * patternLen] : 0;\\n          if (n) {\\n            if (!noteCache[n]) {\\n              noteCache[n] = createNote(instr, n, rowLen);\\n            }\\n\\n            // Copy note from the note cache\\n            var noteBuf = noteCache[n];\\n            for (\\n              j = 0, i = rowStartSample * 2;\\n              j < noteBuf.length;\\n              j++ , i += 2\\n            ) {\\n              chnBuf[i] += noteBuf[j];\\n            }\\n          }\\n        }\\n\\n        // Perform effects for this pattern row\\n        for (j = 0; j < rowLen; j++) {\\n          // Dry mono-sample\\n          k = (rowStartSample + j) * 2;\\n          rsample = chnBuf[k];\\n\\n          // We only do effects if we have some sound input\\n          if (rsample || filterActive) {\\n            // State variable filter\\n            f = fxFreq;\\n            if (fxLFO) {\\n              f *= oscLFO(lfoFreq * k) * lfoAmt + 0.5;\\n            }\\n            f = 1.5 * Math.sin(f);\\n            low += f * band;\\n            high = q * (rsample - band) - low;\\n            band += f * high;\\n            rsample = fxFilter == 3 ? band : fxFilter == 1 ? high : low;\\n\\n            // Distortion\\n            if (dist) {\\n              rsample *= dist;\\n              rsample =\\n                rsample < 1 ? (rsample > -1 ? osc_sin(rsample * 0.25) : -1) : 1;\\n              rsample /= dist;\\n            }\\n\\n            // Drive\\n            rsample *= drive;\\n\\n            // Is the filter active (i.e. still audiable)?\\n            filterActive = rsample * rsample > 1e-5;\\n\\n            // Panning\\n            t = Math.sin(panFreq * k) * panAmt + 0.5;\\n            lsample = rsample * (1 - t);\\n            rsample *= t;\\n          } else {\\n            lsample = 0;\\n          }\\n\\n          // Delay is always done, since it does not need sound input\\n          if (k >= dly) {\\n            // Left channel = left + right[-p] * t\\n            lsample += chnBuf[k - dly + 1] * dlyAmt;\\n\\n            // Right channel = right + left[-p] * t\\n            rsample += chnBuf[k - dly] * dlyAmt;\\n          }\\n\\n          // Store in stereo channel buffer (needed for the delay effect)\\n          chnBuf[k] = lsample | 0;\\n          chnBuf[k + 1] = rsample | 0;\\n\\n          // ...and add to stereo mix buffer\\n          mMixBuf[k] += lsample | 0;\\n          mMixBuf[k + 1] += rsample | 0;\\n        }\\n      }\\n    }\\n\\n    // Next iteration. Return progress (1.0 == done!).\\n    mCurrentCol++;\\n    return mCurrentCol / mSong.numChannels;\\n  };\\n\\n  // Create a WAVE formatted Uint8Array from the generated audio data\\n  this.createWave = function () {\\n    // Create WAVE header\\n    var headerLen = 44;\\n    var l1 = headerLen + mNumWords * 2 - 8;\\n    var l2 = l1 - 36;\\n    var wave = new Uint8Array(headerLen + mNumWords * 2);\\n    wave.set([\\n      82,\\n      73,\\n      70,\\n      70,\\n      l1 & 255,\\n      (l1 >> 8) & 255,\\n      (l1 >> 16) & 255,\\n      (l1 >> 24) & 255,\\n      87,\\n      65,\\n      86,\\n      69,\\n      102,\\n      109,\\n      116,\\n      32,\\n      16,\\n      0,\\n      0,\\n      0,\\n      1,\\n      0,\\n      2,\\n      0,\\n      68,\\n      172,\\n      0,\\n      0,\\n      16,\\n      177,\\n      2,\\n      0,\\n      4,\\n      0,\\n      16,\\n      0,\\n      100,\\n      97,\\n      116,\\n      97,\\n      l2 & 255,\\n      (l2 >> 8) & 255,\\n      (l2 >> 16) & 255,\\n      (l2 >> 24) & 255\\n    ]);\\n\\n    // Append actual wave data\\n    for (var i = 0, idx = headerLen; i < mNumWords; ++i) {\\n      // Note: We clamp here\\n      var y = mMixBuf[i];\\n      y = y < -32767 ? -32767 : y > 32767 ? 32767 : y;\\n      wave[idx++] = y & 255;\\n      wave[idx++] = (y >> 8) & 255;\\n    }\\n\\n    // Return the WAVE formatted typed array\\n    return wave;\\n  };\\n\\n  // Get n samples of wave data at time t [s]. Wave data in range [-2,2].\\n  this.getData = function (t, n) {\\n    var i = 2 * Math.floor(t * 44100);\\n    var d = new Array(n);\\n    for (var j = 0; j < 2 * n; j += 1) {\\n      var k = i + j;\\n      d[j] = t > 0 && k < mMixBuf.length ? mMixBuf[k] / 32768 : 0;\\n    }\\n    return d;\\n  };\\n};\\n\\n// This music has been exported by SoundBox. You can use it with\\n// http://sb.bitsnbites.eu/player-small.js in your own product.\\n\\n// See http://sb.bitsnbites.eu/demo.html for an example of how to\\n// use it in a demo.\\n\\n// Song data\\nvar song = {\\n  songData: [\\n    { // Instrument 0\\n      i: [\\n        0, // OSC1_WAVEFORM\\n        100, // OSC1_VOL\\n        128, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        1, // OSC2_WAVEFORM\\n        201, // OSC2_VOL\\n        128, // OSC2_SEMI\\n        0, // OSC2_DETUNE\\n        0, // OSC2_XENV\\n        0, // NOISE_VOL\\n        0, // ENV_ATTACK\\n        8, // ENV_SUSTAIN\\n        28, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        0, // LFO_WAVEFORM\\n        194, // LFO_AMT\\n        4, // LFO_FREQ\\n        1, // LFO_FX_FREQ\\n        3, // FX_FILTER\\n        25, // FX_FREQ\\n        191, // FX_RESONANCE\\n        115, // FX_DIST\\n        244, // FX_DRIVE\\n        147, // FX_PAN_AMT\\n        6, // FX_PAN_FREQ\\n        43, // FX_DELAY_AMT\\n        4 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [5, 1, 2, 2, 1, 1, 1, 1, 3, 4, 1, 2, 1, 2, 1, 2, , , 7, 7, 7, 7, 7, 7, 7, 7],\\n      // Columns\\n      c: [\\n        {\\n          n: [132, 132, 134, 134, 135, 135, 132, 132, 137, 137, 135, 135, 134, 134, 135, 135, 139, 139, 137, 137, 135, 135, 137, 137, 134, , 133, , 132, , 131],\\n          f: [21, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 48]\\n        },\\n        {\\n          n: [132, 132, 134, 134, 135, 135, 132, 132, 137, 137, 135, 135, 134, 134, 135, 135, 139, 139, 137, 137, 135, 135, 137, 137, 139, 139, 135, 135, 134, 134, 130, 130],\\n          f: [, , , , , , , , , , , , , , , , , , , , , , , , , , , 11, 13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 31]\\n        },\\n        {\\n          n: [],\\n          f: []\\n        },\\n        {\\n          n: [159, , , , , , , , 158, , , , , , , , 157, , , , , , , , 156, 155, 154, 153, 152, 151, 150, 149],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , 13, , 13, , 13, , 13, 11, 29, , , , , , , , , , , , , , , , , , , , , , , , 32, , 41, , 29, , 25, 15]\\n        },\\n        {\\n          n: [132, 132, 134, 134, 135, 135, 132, 132, 137, 137, 135, 135, 134, 134, 135, 135, 139, 139, 137, 137, 135, 135, 137, 137, 139, 139, 135, 135, 134, 134, 130, 130],\\n          f: [13, 11, 21, 17, , , , , , , , , , , , , , , , , , , , , , , , , , , , 17, 29, , 25, 113, , , , , , , , , , , , , , , , , , , , , , , , , , , , 194]\\n        },\\n        {\\n          n: [120, , , , , , , , 132, , , , , , , , 120, , , , , , , , 108],\\n          f: []\\n        },\\n        {\\n          n: [132, 144, 134, 146, 132, 144, 135, 147, 132, 144, 137, 149, 132, 144, 139, 151, 140, 152, 139, 151, 137, 149, 139, 151, 138, 150, 137, 149, 135, 147, 134, 146],\\n          f: []\\n        }\\n      ]\\n    },\\n    { // Instrument 1\\n      i: [\\n        0, // OSC1_WAVEFORM\\n        255, // OSC1_VOL\\n        117, // OSC1_SEMI\\n        1, // OSC1_XENV\\n        0, // OSC2_WAVEFORM\\n        255, // OSC2_VOL\\n        110, // OSC2_SEMI\\n        0, // OSC2_DETUNE\\n        1, // OSC2_XENV\\n        0, // NOISE_VOL\\n        4, // ENV_ATTACK\\n        6, // ENV_SUSTAIN\\n        35, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        0, // LFO_WAVEFORM\\n        0, // LFO_AMT\\n        0, // LFO_FREQ\\n        0, // LFO_FX_FREQ\\n        2, // FX_FILTER\\n        14, // FX_FREQ\\n        1, // FX_RESONANCE\\n        1, // FX_DIST\\n        39, // FX_DRIVE\\n        76, // FX_PAN_AMT\\n        5, // FX_PAN_FREQ\\n        0, // FX_DELAY_AMT\\n        0 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [, , 1, 3, 1, 3, 1, 3, 2, , , , 1, 3, 1, 3, 1, 3, , , 1, 3, 1, 3, 1, 3],\\n      // Columns\\n      c: [\\n        {\\n          n: [147, , , , , , 147, , , , 147, , , , , , 147, , , , , , 147, , , , 147, , , , 147],\\n          f: []\\n        },\\n        {\\n          n: [147],\\n          f: []\\n        },\\n        {\\n          n: [147, , , , , , 147, , , , 147, , , , 147, , 147, , , , , , 147, , , , 147, , , , 147, 147],\\n          f: []\\n        }\\n      ]\\n    },\\n    { // Instrument 2\\n      i: [\\n        0, // OSC1_WAVEFORM\\n        0, // OSC1_VOL\\n        140, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        0, // OSC2_WAVEFORM\\n        0, // OSC2_VOL\\n        140, // OSC2_SEMI\\n        0, // OSC2_DETUNE\\n        0, // OSC2_XENV\\n        60, // NOISE_VOL\\n        4, // ENV_ATTACK\\n        10, // ENV_SUSTAIN\\n        68, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        0, // LFO_WAVEFORM\\n        187, // LFO_AMT\\n        5, // LFO_FREQ\\n        0, // LFO_FX_FREQ\\n        1, // FX_FILTER\\n        239, // FX_FREQ\\n        135, // FX_RESONANCE\\n        0, // FX_DIST\\n        32, // FX_DRIVE\\n        108, // FX_PAN_AMT\\n        5, // FX_PAN_FREQ\\n        16, // FX_DELAY_AMT\\n        4 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [, , 1, 1, 2, 3, 2, 3, 4, , , , 2, 3, 2, 3, 2, 3, , , 5, 5, 5, 5, 5, 5],\\n      // Columns\\n      c: [\\n        {\\n          n: [, , , , 147, , , , , , , , 148, , , , , , , , 147, , , , , , , , 147],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 35]\\n        },\\n        {\\n          n: [, , , , 147, , , 147, , , , , 148, , , , , , , , 147, , , 147, , , 147, , , , 147],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 35]\\n        },\\n        {\\n          n: [, , , , 147, , , 147, , , , , 148, , , , , , , , 147, , , 147, , , 147, , , 147, 147, 147],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 35]\\n        },\\n        {\\n          n: [147],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 68]\\n        },\\n        {\\n          n: [147, , , 147, , , 147, , 147, , , 147, , 147, , 147, 147, , , 147, , , 147, , 147, , , 147, , 147, , 147],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 35]\\n        }\\n      ]\\n    },\\n    { // Instrument 3\\n      i: [\\n        2, // OSC1_WAVEFORM\\n        192, // OSC1_VOL\\n        128, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        2, // OSC2_WAVEFORM\\n        192, // OSC2_VOL\\n        140, // OSC2_SEMI\\n        18, // OSC2_DETUNE\\n        0, // OSC2_XENV\\n        0, // NOISE_VOL\\n        107, // ENV_ATTACK\\n        115, // ENV_SUSTAIN\\n        138, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        0, // LFO_WAVEFORM\\n        136, // LFO_AMT\\n        5, // LFO_FREQ\\n        1, // LFO_FX_FREQ\\n        2, // FX_FILTER\\n        8, // FX_FREQ\\n        93, // FX_RESONANCE\\n        22, // FX_DIST\\n        56, // FX_DRIVE\\n        148, // FX_PAN_AMT\\n        5, // FX_PAN_FREQ\\n        85, // FX_DELAY_AMT\\n        8 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [3, , 2, 1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2],\\n      // Columns\\n      c: [\\n        {\\n          n: [120],\\n          f: []\\n        },\\n        {\\n          n: [120],\\n          f: []\\n        },\\n        {\\n          n: [120],\\n          f: [, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 24, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 56]\\n        }\\n      ]\\n    },\\n    { // Instrument 4\\n      i: [\\n        3, // OSC1_WAVEFORM\\n        0, // OSC1_VOL\\n        127, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        3, // OSC2_WAVEFORM\\n        68, // OSC2_VOL\\n        127, // OSC2_SEMI\\n        0, // OSC2_DETUNE\\n        1, // OSC2_XENV\\n        218, // NOISE_VOL\\n        11, // ENV_ATTACK\\n        0, // ENV_SUSTAIN\\n        40, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        1, // LFO_WAVEFORM\\n        55, // LFO_AMT\\n        4, // LFO_FREQ\\n        1, // LFO_FX_FREQ\\n        2, // FX_FILTER\\n        67, // FX_FREQ\\n        115, // FX_RESONANCE\\n        124, // FX_DIST\\n        190, // FX_DRIVE\\n        67, // FX_PAN_AMT\\n        6, // FX_PAN_FREQ\\n        39, // FX_DELAY_AMT\\n        1 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [, , , 2, 1, 2, 1, 2, 3, , , , 1, 2, 1, 2, 1, 2, , , 1, 4, 1, 4, 1, 4],\\n      // Columns\\n      c: [\\n        {\\n          n: [, , , , 147, , , , , , , , 147, , , , , , , , 147, , , , , , , , 147],\\n          f: []\\n        },\\n        {\\n          n: [, , , , 147, , , , , , 147, , 147, , , , , , , , 147, , , , , , , , 147],\\n          f: []\\n        },\\n        {\\n          n: [147],\\n          f: []\\n        },\\n        {\\n          n: [, , , , 147, , , , , , , , 147, , , , , , , , 147, , , , , , , , 147, , , 147],\\n          f: []\\n        }\\n      ]\\n    },\\n    { // Instrument 5\\n      i: [\\n        3, // OSC1_WAVEFORM\\n        91, // OSC1_VOL\\n        128, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        0, // OSC2_WAVEFORM\\n        95, // OSC2_VOL\\n        128, // OSC2_SEMI\\n        12, // OSC2_DETUNE\\n        0, // OSC2_XENV\\n        0, // NOISE_VOL\\n        12, // ENV_ATTACK\\n        0, // ENV_SUSTAIN\\n        67, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        0, // LFO_WAVEFORM\\n        0, // LFO_AMT\\n        0, // LFO_FREQ\\n        0, // LFO_FX_FREQ\\n        2, // FX_FILTER\\n        255, // FX_FREQ\\n        15, // FX_RESONANCE\\n        0, // FX_DIST\\n        32, // FX_DRIVE\\n        83, // FX_PAN_AMT\\n        3, // FX_PAN_FREQ\\n        51, // FX_DELAY_AMT\\n        4 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [, , , , 1, 2, 1, 2, 1, 2, , , 1, 2, 3, 2, 1, 2, , , , , 5, 4, 5, 4],\\n      // Columns\\n      c: [\\n        {\\n          n: [156, , , 164, , , 163, , 161, , , , , , , , , , 158, , 159, , 161, , 159, , 158, , 159, , 154, , 159],\\n          f: [5, 13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 67]\\n        },\\n        {\\n          n: [144, , , 147, , , 149, , 151, , , , , , , , , , 149, , 151, , 152, , 151, , 151, , 147, , 147, , 139],\\n          f: []\\n        },\\n        {\\n          n: [156, , , 156, , , 156, , 154, , , 154, , , 154, , 152, , , 152, , , 152, , 151, , , 147, , , 146, , , , 151, , , 151, , 151, , , 146, , , 146, , 146, , , 144, , , 144, , 144, , , 142, , , 139, , 137],\\n          f: [5, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 3]\\n        },\\n        {\\n          n: [163, , 164, , 166, , 163, , 163, , 164, , 166, , 163, , 163, , 164, , 166, , 163, , 163, , 164, , 166, , 163],\\n          f: [13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 25]\\n        },\\n        {\\n          n: [168, , 170, , 171, , 168, , 168, , 170, , 171, , 168, , 159, , 159, , 158, , 158, , 157, , 157, , 156, , 156],\\n          f: [, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 13, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 67]\\n        }\\n      ]\\n    },\\n    { // Instrument 6\\n      i: [\\n        0, // OSC1_WAVEFORM\\n        146, // OSC1_VOL\\n        140, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        1, // OSC2_WAVEFORM\\n        224, // OSC2_VOL\\n        128, // OSC2_SEMI\\n        3, // OSC2_DETUNE\\n        0, // OSC2_XENV\\n        0, // NOISE_VOL\\n        61, // ENV_ATTACK\\n        0, // ENV_SUSTAIN\\n        63, // ENV_RELEASE\\n        0, // ARP_CHORD\\n        0, // ARP_SPEED\\n        3, // LFO_WAVEFORM\\n        179, // LFO_AMT\\n        5, // LFO_FREQ\\n        1, // LFO_FX_FREQ\\n        3, // FX_FILTER\\n        37, // FX_FREQ\\n        162, // FX_RESONANCE\\n        0, // FX_DIST\\n        67, // FX_DRIVE\\n        150, // FX_PAN_AMT\\n        3, // FX_PAN_FREQ\\n        37, // FX_DELAY_AMT\\n        2 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [, 1, , , , , , , , , 1, 2, 3, , 1, 2, 1, 2, 3, , 4, 5],\\n      // Columns\\n      c: [\\n        {\\n          n: [, , , , , , , , , , , , , , , , , , , , , , , , 122, , 121, , 120, , 119],\\n          f: []\\n        },\\n        {\\n          n: [, , , , , , , , , , , , 110, 109, , , , , , , , , , , , , , , 132, 144, 120, 108],\\n          f: [11, , , , , , , , , , , , , , , , , , , , , , , , , , , , 11, , , , 95, , , , , , , , , , , , , , , , , , , , , , , , , , , , 29]\\n        },\\n        {\\n          n: [123],\\n          f: [24, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 24, 52, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 67]\\n        },\\n        {\\n          n: [120, , , , , , 120, , 120, , , , , , , , , , , , , , , , , , , , , , , , 123, , , , , , 123, , 123, , , , , , , , , , , , , , , , , , , , , , , , 125, , , , , , 125, , 125],\\n          f: [11, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 95]\\n        },\\n        {\\n          n: [120, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 123, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 125],\\n          f: []\\n        }\\n      ]\\n    },\\n    { // Instrument 7\\n      i: [\\n        2, // OSC1_WAVEFORM\\n        138, // OSC1_VOL\\n        116, // OSC1_SEMI\\n        0, // OSC1_XENV\\n        2, // OSC2_WAVEFORM\\n        138, // OSC2_VOL\\n        128, // OSC2_SEMI\\n        4, // OSC2_DETUNE\\n        0, // OSC2_XENV\\n        0, // NOISE_VOL\\n        47, // ENV_ATTACK\\n        48, // ENV_SUSTAIN\\n        107, // ENV_RELEASE\\n        124, // ARP_CHORD\\n        3, // ARP_SPEED\\n        0, // LFO_WAVEFORM\\n        139, // LFO_AMT\\n        4, // LFO_FREQ\\n        1, // LFO_FX_FREQ\\n        3, // FX_FILTER\\n        64, // FX_FREQ\\n        160, // FX_RESONANCE\\n        3, // FX_DIST\\n        32, // FX_DRIVE\\n        147, // FX_PAN_AMT\\n        4, // FX_PAN_FREQ\\n        121, // FX_DELAY_AMT\\n        5 // FX_DELAY_TIME\\n      ],\\n      // Patterns\\n      p: [, , , , , , , , 1, , , , , , , , , , 1],\\n      // Columns\\n      c: [\\n        {\\n          n: [156, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 168],\\n          f: []\\n        }\\n      ]\\n    },\\n  ],\\n  rowLen: 5513,   // In sample lengths\\n  patternLen: 32,  // Rows per pattern\\n  endPattern: 25,  // End pattern\\n  numChannels: 8  // Number of channels\\n};\\n\\nlet player = new Soundbox();\\nplayer.init(song);\\n\\n// Initialize music generation (player).\\nplayer.init(song);\\n\\n// Generate music...\\nlet done = false;\\nsetInterval(function () {\\n  if (done) {\\n    return;\\n  }\\n\\n  done = player.generate() >= 1;\\n\\n  if (done) {\\n    // Put the generated song in an Audio element.\\n    let wave = player.createWave();\\n    postMessage(wave);\\n  }\\n}, 10);\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = (player);\\n\\n\\n/***/ })\\n\\n/******/ });\\n//# sourceMappingURL=9d71fd9bba6c2a765428.worker.js.map\", null);\n};"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/LA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrDA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1KA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/EA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7GA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5XA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3EA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvHA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvDA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChZA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjOA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1EA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1FA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1NA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5IA;AACA;AACA;;;;A","sourceRoot":""}