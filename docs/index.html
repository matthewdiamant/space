<html><head><meta charset="UTF-8"><meta property="og:url" content="https://matthewdiamant.github.io/space/"><meta property="og:type" content="article"><meta property="og:title" content="SPACE"><meta property="og:description" content="A shoot em up game for js13kgames"><meta property="og:image" content="https://github.com/matthewdiamant/space/blob/master/socialimage.png?raw=true"><style>*{margin:0}body{align-items:center;background:black;display:flex;justify-content:center}canvas{background:white;image-rendering:pixelated}div{filter:brightness(1);transition:5s filter}div.loaded{filter:brightness(1)}.scanlines{position:relative;overflow:hidden}.scanlines:before,.scanlines:after{display:block;pointer-events:none;content:"";position:absolute}.scanlines:before {width:100%;height:2px;z-index:2147483649;background:rgba(57, 255, 20, 0.12);opacity:0.75;animation:scanline 6s linear infinite}.scanlines:after{top:0;right:0;bottom:0;left:0;z-index:2147483648;background:linear-gradient(to bottom,transparent 50%,rgba(57, 255, 20, 0.12) 51%);background-size:100% 4px;animation:scanlines 1s steps(60) infinite}@keyframes scanline{0%{transform:translate3d(0,200000%,0)}}@keyframes scanlines{0%{background-position:0 50%}}canvas {image-rendering: crisp-edges; image-rendering: pixelated; }</style></head><div class="scanlines"><canvas id="c" width="160" height="160"></canvas></div></html><script>!function(t){var s={};function i(e){if(s[e])return s[e].t;var h=s[e]={s:e,i:!1,t:{}};return t[e].call(h.t,h,h.t,i),h.i=!0,h.t}i.h=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{l:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.p=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.u)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{l:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)i.d(e,h,function(s){return t[s]}.bind(null,h));return e},i.n=function(t){var s=t&&t.u?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.m="",i(i.g=2)}([function(t,s,i){t.t=function(){return i(1)('!function(n){var t={};function r(f){if(t[f])return t[f].t;var e=t[f]={u:f,i:!1,t:{}};return n[f].call(e.t,e,e.t,r),e.i=!0,e.t}r.o=n,r.c=t,r.d=function(n,t,f){r.v(n,t)||Object.defineProperty(n,t,{l:!0,get:f})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"s",{value:!0})},r.h=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.s)return n;var f=Object.create(null);if(r.r(f),Object.defineProperty(f,"default",{l:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)r.d(f,e,function(t){return n[t]}.bind(null,e));return f},r.n=function(n){var t=n&&n.s?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.v=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.M=0)}([function(n,t,r){"use strict";r.r(t);var f={j:[{u:[0,100,128,0,1,201,128,0,0,0,0,8,28,0,0,0,194,4,1,3,25,191,115,244,147,6,43,4],p:[5,1,2,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,7,7,7,7,7,7,7],c:[{n:[132,132,134,134,135,135,132,132,137,137,135,135,134,134,135,135,139,139,137,137,135,135,137,137,134,,133,,132,,131],f:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[132,132,134,134,135,135,132,132,137,137,135,135,134,134,135,135,139,139,137,137,135,135,137,137,139,139,135,135,134,134,130,130],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[],f:[]},{n:[159,,,,,,,,158,,,,,,,,157,,,,,,,,156,155,154,153,152,151,150,149],f:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[132,132,134,134,135,135,132,132,137,137,135,135,134,134,135,135,139,139,137,137,135,135,137,137,139,139,135,135,134,134,130,130],f:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[120,,,,,,,,132,,,,,,,,120,,,,,,,,108],f:[]},{n:[132,144,134,146,132,144,135,147,132,144,137,149,132,144,139,151,140,152,139,151,137,149,139,151,138,150,137,149,135,147,134,146],f:[]}]},{u:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,,1,3,1,3,1,3,2,,,,1,3,1,3,1,3,,,1,3,1,3,1,3],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],f:[]},{n:[147],f:[]},{n:[147,,,,,,147,,,,147,,,,147,,147,,,,,,147,,,,147,,,,147,147],f:[]}]},{u:[0,0,140,0,0,0,140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,,147,,147,,,147,,147,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{u:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,93,22,56,148,5,85,8],p:[3,,2,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[120],f:[]},{n:[120],f:[]},{n:[120],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{u:[3,0,127,0,3,68,127,0,1,218,11,0,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,2,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],f:[]},{n:[,,,,147,,,,,,147,,147,,,,,,,,147,,,,,,,,147],f:[]},{n:[147],f:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],f:[]}]},{u:[3,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,51,4],p:[,,,,1,2,1,2,1,2,,,1,2,3,2,1,2,,,,,5,4,5,4],c:[{n:[156,,,164,,,163,,161,,,,,,,,,,158,,159,,161,,159,,158,,159,,154,,159],f:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[144,,,147,,,149,,151,,,,,,,,,,149,,151,,152,,151,,151,,147,,147,,139],f:[]},{n:[156,,,156,,,156,,154,,,154,,,154,,152,,,152,,,152,,151,,,147,,,146,,,,151,,,151,,151,,,146,,,146,,146,,,144,,,144,,144,,,142,,,139,,137],f:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[163,,164,,166,,163,,163,,164,,166,,163,,163,,164,,166,,163,,163,,164,,166,,163],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[168,,170,,171,,168,,168,,170,,171,,168,,159,,159,,158,,158,,157,,157,,156,,156],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{u:[0,146,140,0,1,224,128,3,0,0,61,0,63,0,0,3,179,5,1,3,37,162,0,67,150,3,37,2],p:[,1,,,,,,,,,1,2,3,,1,2,1,2,3,,4,5],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,,122,,121,,120,,119],f:[]},{n:[,,,,,,,,,,,,110,109,,,,,,,,,,,,,,,132,144,120,108],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[120,,,,,,120,,120,,,,,,,,,,,,,,,,,,,,,,,,123,,,,,,123,,123,,,,,,,,,,,,,,,,,,,,,,,,125,,,,,,125,,125],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,125],f:[]}]},{u:[2,138,116,0,2,138,128,4,0,0,47,48,107,124,3,0,139,4,1,3,64,160,3,32,147,4,121,5],p:[,,,,,,,,1,,,,,,,,,,1],c:[{n:[156,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,168],f:[]}]}],m:5513,O:32,A:25,g:8};let e=new function(){var n,t,r,f,e,u=function(n){return Math.sin(6.283184*n)},i=function(n){return.003959503758*Math.pow(2,(n-128)/12)},a=function(n,t,r){var f,e,u,a,c,v,l,s=o[n.u[0]],h=n.u[1],p=n.u[3],b=o[n.u[4]],M=n.u[5],y=n.u[8],j=n.u[9],d=n.u[10]*n.u[10]*4,m=n.u[11]*n.u[11]*4,w=n.u[12]*n.u[12]*4,O=1/w,A=n.u[13],g=r*Math.pow(2,2-n.u[14]),I=new Int32Array(d+m+w),S=0,L=0;for(f=0,e=0;d+m+w>f;f++,e++)0>e||(e-=g,v=i(t+(15&(A=A>>8|(255&A)<<4))+n.u[2]-128),l=i(t+(15&A)+n.u[6]-128)*(1+8e-4*n.u[7])),u=1,d>f?u=f/d:d+m>f||(u-=(f-d-m)*O),a=v,p&&(a*=u*u),c=s(S+=a)*h,a=l,y&&(a*=u*u),c+=b(L+=a)*M,j&&(c+=(2*Math.random()-1)*j),I[f]=80*c*u|0;return I},o=[u,function(n){return.5>n%1?1:-1},function(n){return n%1*2-1},function(n){var t=n%1*4;return 2>t?t-1:3-t}];this.init=function(u){n=u,r=0,f=u.m*u.O*((t=u.A)+1)*2,e=new Int32Array(f)},this.I=function(){var i,c,v,l,s,h,p,b,M,y,j,d,m,w,O=new Int32Array(f),A=n.j[r],g=n.m,I=n.O,S=0,L=0,_=!1,x=[];for(v=0;t>=v;++v)for(p=A.p[v],l=0;I>l;++l){var C=p?A.c[p-1].f[l]:0;C&&(A.u[C-1]=A.c[p-1].f[l+I]||0,16>C&&(x=[]));var D=o[A.u[15]],P=A.u[16]/512,U=Math.pow(2,A.u[17]-9)/g,k=A.u[18],q=A.u[19],z=135.82764118168*A.u[20]/44100,B=1-A.u[21]/255,E=1e-5*A.u[22],F=A.u[23]/32,G=A.u[24]/512,H=6.283184*Math.pow(2,A.u[25]-9)/g,J=A.u[26]/255,K=A.u[27]*g&-2;for(j=(v*I+l)*g,s=0;4>s;++s)if(h=p?A.c[p-1].n[l+s*I]:0){x[h]||(x[h]=a(A,h,g));var N=x[h];for(c=0,i=2*j;N.length>c;c++,i+=2)O[i]+=N[c]}for(c=0;g>c;c++)(y=O[b=2*(j+c)])||_?(d=z,k&&(d*=D(U*b)*P+.5),L+=(d=1.5*Math.sin(d))*(m=B*(y-L)-(S+=d*L)),y=3==q?L:1==q?m:S,E&&(y=1>(y*=E)?y>-1?u(.25*y):-1:1,y/=E),_=(y*=F)*y>1e-5,w=y*(1-(M=Math.sin(H*b)*G+.5)),y*=M):w=0,K>b||(w+=O[b-K+1]*J,y+=O[b-K]*J),O[b]=0|w,O[b+1]=0|y,e[b]+=0|w,e[b+1]+=0|y}return++r/n.g},this.S=function(){var n=44+2*f-8,t=n-36,r=new Uint8Array(44+2*f);r.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var u=0,i=44;f>u;++u){var a=e[u];r[i++]=255&(a=-32767>a?-32767:a>32767?32767:a),r[i++]=a>>8&255}return r},this.getData=function(n,t){for(var r=2*Math.floor(44100*n),f=Array(t),u=0;2*t>u;u+=1){var i=r+u;f[u]=n>0&&e.length>i?e[i]/32768:0}return f}};e.init(f),e.init(f);let u=!1;setInterval((function(){if(!u&&(u=e.I()>=1,u)){let n=e.S();postMessage(n)}}),10),t.default=e}]);',null)}},function(t){"use strict";var s=window.URL||window.webkitURL;t.t=function(t,i){try{try{var e;try{(e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),e=e.getBlob()}catch(s){e=new Blob([t])}return new Worker(s.createObjectURL(e))}catch(s){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!i)throw Error("Inline worker is not supported");return new Worker(i)}}},function(t,s,i){"use strict";i.r(s);let e=null;class h{constructor(t){this.canvas=t,e=this.canvas.getContext("2d"),this.k=new class{constructor(){this.x=0,this.y=128,this.j=0,this.v=128,this.$=0,this._=0}q(t,s){return t-this.x+s/2}tt(t,s){return t-this.y+s/2}st(t){this.j=Math.round(Math.min(Math.max(10*t.it,this.j),(t.et-10)*t.it))}ht(t){this.v=Math.round(Math.min(Math.max(10*t.it,this.v),(t.ot-10)*t.it+15))}nt(t){t.x-this.j>10&&(this.j=t.x-10),-10>t.x-this.j&&(this.j=t.x+10),t.y-this.v>10&&(this.v=t.y-10),-10>t.y-this.v&&(this.v=t.y+10)}rt(t,s){this._>t&&0!==this.$||(this.$=s,this._=t)}at(){if(this.$=Math.max(0,this.$-1),!this.$)return;const t=Math.random()*this._*2-this._,s=Math.random()*this._*2-this._;this.x+=t,this.y+=s}lt({ct:t,map:s}){this.nt(t,s),this.st(s),this.ht(s),this.x=this.j,this.y=this.v,this.at()}}}ut(t){e.save(),t(),e.restore()}ft(){e.clearRect(0,0,this.canvas.width,this.canvas.height)}dt(t,s){e.save();var i=e.createLinearGradient(20,0,220,0);i.addColorStop(0,t),i.addColorStop(1,s),e.rotate(Math.PI/2),e.translate(0,-this.canvas.height),e.fillStyle=i,e.fillRect(0,0,this.canvas.width,this.canvas.height),e.restore()}rect({rect:t,pt:s,wt:i,shadowBlur:h=0,shadowColor:o="none",opacity:n,lineWidth:r=1,yt:a=!0,rotation:l,size:c,Mt:u=!0}){u&&(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1])),a&&(t[0]=this.k.q(t[0],this.canvas.width),t[1]=this.k.tt(t[1],this.canvas.height)),l&&(e.translate(t[0]+c/2,t[1]+c/2),e.rotate(l),e.translate(-1*t[0]-c/2,-1*t[1]-c/2)),e.shadowBlur=h,e.shadowColor=o,n&&(e.globalAlpha=n),s&&(e.fillStyle=s,e.fillRect(t[0],t[1],...t.slice(2))),i&&(e.strokeStyle=i,e.lineWidth=r,e.strokeRect(t[0],t[1],...t.slice(2))),e.shadowBlur=0,e.globalAlpha=1}arc({arc:t,yt:s=!0,pt:i,wt:h,shadowBlur:o,shadowColor:n}){s&&(t[0]=this.k.q(t[0],this.canvas.width),t[1]=this.k.tt(t[1],this.canvas.height)),e.beginPath(),e.arc(...t),e.shadowBlur=o,e.shadowColor=n,i&&(e.fillStyle=i,e.fill()),h&&(e.strokeStyle=h,e.stroke()),e.shadowBlur=0}text({text:t,x:s,y:i,pt:h="#fff",size:n=1}){e.fillStyle=h;let r=0;t.toUpperCase().split("").map(t=>(o[t]||console.log(t),o[t])).forEach(t=>{let h=0,o=0;t.forEach(t=>{t.forEach((t,o)=>{t&&e.fillRect(r+o*n+s,h+i,n,n)}),o=Math.max(o,t.length*n),h+=n}),r+=n+o})}gt({gt:t,shadowBlur:s=0,shadowColor:i,pt:h,wt:o}){e.beginPath(),e.moveTo(t[0][0],t[0][1]),t.slice(1).map(t=>e.lineTo(t[0],t[1])),e.closePath(),e.shadowBlur=s,e.shadowColor=i,o&&(e.strokeStyle=o,e.stroke()),h&&(e.fillStyle=h,e.fill())}bt({bt:t,x:s,y:i,yt:h=!0}){this.ut(()=>{h&&(s=this.k.q(s,this.canvas.width),i=this.k.tt(i,this.canvas.height)),e.font="6px serif",e.fillText(t,s,i+2)})}kt({x:t,y:s,size:i}){this.rect({rect:[t-i/2,s-i/2,i,i],color:"#f00"})}}const o={A:[[,1],[1,,1],[1,,1],[1,1,1],[1,,1]],B:[[1,1],[1,,1],[1,1,1],[1,,1],[1,1]],C:[[1,1,1],[1],[1],[1],[1,1,1]],D:[[1,1],[1,,1],[1,,1],[1,,1],[1,1]],E:[[1,1,1],[1],[1,1,1],[1],[1,1,1]],F:[[1,1,1],[1],[1,1],[1],[1]],G:[[,1,1],[1],[1,,1,1],[1,,,1],[,1,1]],H:[[1,,1],[1,,1],[1,1,1],[1,,1],[1,,1]],I:[[1,1,1],[,1],[,1],[,1],[1,1,1]],J:[[1,1,1],[,,1],[,,1],[1,,1],[1,1,1]],K:[[1,,,1],[1,,1],[1,1],[1,,1],[1,,,1]],L:[[1],[1],[1],[1],[1,1,1]],M:[[1,1,1,1,1],[1,,1,,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,1],[1,1,,1],[1,,1,1],[1,,,1],[1,,,1]],O:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],P:[[1,1,1],[1,,1],[1,1,1],[1],[1]],Q:[[0,1,1],[1,,,1],[1,,,1],[1,,1,1],[1,1,1,1]],R:[[1,1],[1,,1],[1,,1],[1,1],[1,,1]],S:[[1,1,1],[1],[1,1,1],[,,1],[1,1,1]],T:[[1,1,1],[,1],[,1],[,1],[,1]],U:[[1,,1],[1,,1],[1,,1],[1,,1],[1,1,1]],V:[[1,,,,1],[1,,,,1],[,1,,1],[,1,,1],[,,1]],W:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,1,1,1]],X:[[1,,,,1],[,1,,1],[,,1],[,1,,1],[1,,,,1]],Y:[[1,,1],[1,,1],[,1],[,1],[,1]],Z:[[1,1,1,1,1],[,,,1],[,,1],[,1],[1,1,1,1,1]]," ":[[,,],[,,],[,,],[,,],[,,]],0:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],1:[[,1],[,1],[,1],[,1],[,1]],2:[[1,1,1],[0,0,1],[1,1,1],[1,0,0],[1,1,1]],3:[[1,1,1],[0,0,1],[1,1,1],[0,0,1],[1,1,1]],4:[[1,0,1],[1,0,1],[1,1,1],[0,0,1],[0,0,1]],5:[[1,1,1],[1,0,0],[1,1,1],[0,0,1],[1,1,1]],6:[[1,1,1],[1,0,0],[1,1,1],[1,0,1],[1,1,1]],7:[[1,1,1],[0,0,1],[0,0,1],[0,0,1],[0,0,1]],8:[[1,1,1],[1,0,1],[1,1,1],[1,0,1],[1,1,1]],9:[[1,1,1],[1,0,1],[1,1,1],[0,0,1],[1,1,1]]};let n=document.getElementById("c");class r{constructor(){this.canvas=n}initialize(){let t=document.querySelector("body"),s=()=>{t.clientWidth/t.clientHeight>1?(n.style.height="100vh")&&(n.style.width="auto"):(n.style.height="auto")&&(n.style.width="100vw")};s(),t.onresize=s}}const a={volume:.3,sampleRate:44100,x:new(window.AudioContext||webkitAudioContext),play:function(...t){return this.Ct(this.jt(...t))},Ct:function(...t){const s=this.x.createBuffer(t.length,t[0].length,this.sampleRate),i=this.x.createBufferSource();return t.map((t,i)=>s.getChannelData(i).set(t)),i.buffer=s,i.connect(this.x.destination),i.start(),i},jt:function(t=1,s=.05,i=220,e=0,h=0,o=.1,n=0,r=1,a=0,l=0,c=0,u=0,f=0,d=0,p=0,w=0,y=0,m=1,M=0,g=0){const b=2*Math.PI;let k,C,j=this.sampleRate,v=a*=500*b/j/j,x=i*=(1+2*s*Math.random()-s)*b/j,A=[],S=0,O=0,F=0,P=1,z=0,I=0,B=0;for(l*=500*b/j**3,p*=b/j,c*=b/j,u*=j,f=f*j|0,C=(e=e*j+9)+(M*=j)+(h*=j)+(o*=j)+(y*=j)|0;C>F;A[F++]=B)++I%(100*w|0)||(B=n?n>1?n>2?n>3?Math.sin((S%b)**3):Math.max(Math.min(Math.tan(S),1),-1):1-(2*S/b%2+2)%2:1-4*Math.abs(Math.round(S/b)-S/b):Math.sin(S),B=(f?1-g+g*Math.sin(b*F/f):1)*(B>0?1:-1)*Math.abs(B)**r*t*this.volume*(e>F?F/e:e+M>F?1-(F-e)/M*(1-m):e+M+h>F?m:C-y>F?(C-F-y)/o*m:0),B=y?B/2+(y>F?0:(C-y>F?1:(C-F)/y)*A[F-y|0]/2):B),k=(i+=a+=l)*Math.cos(p*O++),S+=k-k*d*(1-1e9*(Math.sin(F)+1)%2),P&&++P>u&&(i+=c,x+=c,P=0),!f||++z%f||(i=x,a=v,P=P||1);return A},vt:function(t=0,s=440){return s*2**(t/12)}};let l={death:[2.45,,608,.02,.09,.38,2,1.24,.6,,,,,.3,,.4,.03,.51,.05],gun:[.4,0,0,,,0,4,0,500,,,,,,,.1,,0,.15],jump:[,,131,.02,.02,.08,,1.49,2.3,,,,,,,,,.9,.1],message:[2,0,1740,,.06,.29,,.77,,,,,,,,,,.76,.07,.06],minigun:[.6,0,0,,,0,4,0,1e8,,,,,,,.04,,0,.08],pickup:[,,548,.08,.36,.47,1,1.79,,,236,.03,.08,,,,,.83],shotgun:[.8,,300,,,.9,4,.5,,,,,,10,74,.2,,2],sniper:[.8,,300,,,1.2,4,.5,,,,,,10,74,.1,,2],thrown:[1,0,0,,,0,4,0,1e8,,,,,,,.055,,0,.3]};class c{constructor(){this.volume=1}play(t,s){const i=[...l[t]];s&&(i[0]*=s*this.volume),function(...t){a.play(...t)}(...i)}xt(t){this.volume=t}}class u{constructor({x:t,y:s,At:i,St:e,Ot:h}){this.x=t,this.y=s,this.dx=0,this.dy=0,this.At=i,this.St=e,this.Ot=h}}var f=class extends u{constructor(t,s,i,e,h){super({x:t,y:s,Ot:.1}),this.dx=i,this.dy=e,this.color=h,this.Ft=!1}Pt(){this.Ft=!0}lt(){this.Ft||(this.x+=this.dx,this.dy+=this.Ot,this.y+=this.dy)}ut(t){t.rect({pt:this.color,rect:[this.x,this.y,1,1]})}},d=class{constructor({x:t,y:s,zt:i},{color:e,speed:h,It:o=0,Bt:n=0,Dt:r=0,Ot:a=0,Et:l,Lt:c,Yt:u,Xt:f,size:d,bt:p},w){this.size=d||1,this.x=t-this.size/2,this.y=s,this.dx=i*h+(Math.random()-o/2)*o,this.dy=(Math.random()-n/2)*n-r,this.Ot=a,this.color=e,this.Yt=u||1,this.Gt=0,this.Kt=!1,this.$t=!1,this.Wt=null,this.Et=l,this.Lt=c||1,this.Xt=f,this.zt=i,this.bt=p,this.Nt=w}Rt(){this.$t=!0,this.Wt=2}lt(){this.Gt+=1,this.Wt&&(this.Wt-=1,0===this.Wt&&(this.Kt=!0)),this.$t||(this.x+=this.dx,this.dy+=this.Ot,this.y+=this.dy)}ut(t){this.$t?t.arc({arc:[this.x,this.y,2/this.Wt*this.Yt,0,2*Math.PI],pt:"#ff8",shadowBlur:10,shadowColor:"#ff0"}):this.bt?t.bt({x:this.x,y:this.y,bt:this.bt,Ut:-1===this.zt}):1===this.size?t.rect({pt:this.color(),rect:[this.x,this.y,this.size,this.size]}):t.arc({arc:[this.x,this.y,this.size,0,2*Math.PI],pt:this.color(),shadowBlur:this.size,shadowColor:"#ff0"})}},p=class{constructor({name:t,Ht:s,Tt:i=1,_t:e,Jt:h,rt:o,qt:n,Vt:r}){this.name=t,this.Ht=s,this.Tt=i,this._t=e,this.Jt=h,this.rt=o,this.qt=n,this.Vt=r,this.Qt=s,this.Zt=!1}lt(t,s,i,e,h,o,n){return this.Qt+=1,this.Zt=!1,this.Qt>this.Ht*this.Tt&&t?(this.ts(s,i,n),h.play(this.qt,o),this.rt&&e.rt(this.rt.ss,this.rt.duration),this.Zt=!0,this.Jt):0}ts(t,s,i){this.Qt=0;for(let e=0;this._t>e;e++){const e=new d(s,this.Vt,i);t.add(e)}}ut(t,s){this.Zt&&([[s.x+(1===s.zt?8:-1),s.y+3,1,1],[s.x+(1===s.zt?7:0),s.y+4,2,3]].forEach(([s,i,e,h])=>t.rect({pt:"yellow",rect:[s,i,e,h]})),[[s.x+(1===s.zt?8:-1),s.y+4,2,2],[s.x+(1===s.zt?10:-3),s.y+4,1,1]].forEach(([s,i,e,h])=>t.rect({pt:"white",rect:[s,i,e,h]})))}};const w={name:"Pistol",Ht:10,_t:1,Jt:0,qt:"gun",Vt:{color:()=>"#eee",speed:3,It:0,Bt:.15,Et:10,Xt:5}},y={name:"Minigun",Ht:2,_t:1,Jt:.2,rt:{ss:1,duration:2},qt:"minigun",Vt:{color:()=>"#fff",speed:4,It:1,Bt:.3,Et:2,Xt:5}},m={name:"Assault Rifle",Ht:8,_t:1,Jt:.1,qt:"gun",Vt:{color:()=>"#fff",speed:3,It:0,Bt:.3,Et:4,Xt:5}},M={name:"Shotgun",Ht:30,_t:12,Jt:1,rt:{ss:2,duration:8},qt:"shotgun",Vt:{color:()=>"yellow",speed:4,It:.7,Bt:1,Et:1,Xt:5}},g={name:"Super Shotgun",Ht:60,_t:24,Jt:2,rt:{ss:3,duration:8},qt:"shotgun",Vt:{color:()=>"yellow",speed:4,It:1,Bt:1.5,Et:1,Xt:5}},b={name:"sniper rifle",Ht:60,_t:1,Jt:2,rt:{ss:3,duration:8},qt:"sniper",Vt:{color:()=>"#eee",speed:6,It:0,Bt:0,Et:22,Xt:50}},k={name:"Grenade",Ht:40,_t:1,Jt:0,qt:"thrown",Vt:{bt:"ðŸ’£",speed:3,Dt:1.5,Ot:.1,Yt:3,size:3,Et:22,Xt:50}},C=[{prefix:"Collosal",Tt:3,Vt:{color:()=>"yellow",Lt:3,Yt:5,size:5}},...[["Rainbow",()=>["#FF0000","#FFAC00","#FFF100","#0BFF00","#00F6FF"][Math.floor(6*Math.random())]],["Blood",()=>"#F00"],["Water",()=>"#6CF"]].map(([t,s])=>({prefix:t,Vt:{color:s}})),...[["Shrimp","ðŸ¤"],["Bomb","ðŸ’£"],["Crab","ðŸ¦€"],["Skull","ðŸ’€"],["Pumpkin","ðŸŽƒ"],["Cookie","ðŸª"],["Carrot","ðŸ¥•"],["Pineapple","ðŸ"],["Hotdog","ðŸŒ­"],["Fish","ðŸŸ"],["Bee","ðŸ"],["Apple","ðŸŽ"],["Knife","ðŸ”ª"],["Heart","â¤ï¸"]].map(([t,s])=>({prefix:t,Vt:{bt:s,Yt:3,size:3}}))];var j=class{constructor(){}create(t){return new p(t)}random(t){const s=[w,m,y,M,g,b,k],i=s[Math.floor(Math.random()*s.length)],e=Math.min(.1*Math.max(t-6,0),.5),h=Math.random()<e?C[Math.floor(Math.random()*C.length)]:{Vt:{}},o={...i.Vt,...h.Vt},n={...i,...h,Vt:o,name:`${h.prefix?h.prefix+" ":""}${i.name}`};return this.create(n)}};const v=(t,s)=>{const{x:i,y:e,dy:h,size:o}=t;if(0>h)return!1;const n=s.es(i,e+o),r=s.es(i+o-1,e+o);return!(!n&&!r||(t.dy=0,t.y=8*Math.floor(e/8),t.hs=!0,t.os=0,0))},x=(t,s,i)=>Math.min(Math.max(s,t),i);var A=class extends u{constructor(t,s,i,e,h){super({x:t,y:s,At:1,St:2,Ot:.15}),this.size=8,this.ns=.05,this.rs=.8,this.as=1,this.hs=!0,this.zt=e||1,this.Gt=0,this.ls=0,this.os=0,this.cs=0,this.us=2,this.fs=12,this.ds=i,this.ps=i,this.ws=h||(new j).random()}static lt({k:t,map:s,ys:i,ms:e,Ms:h,qt:o,volume:n}){this.Gt+=1;const{left:r,right:a,gs:l,bs:c}=e;this.ls=l?this.ls+1:0;let u=0;if(this.ws&&(u=this.ws.lt(c,i,{x:this.x+(1===this.zt?this.size-1:1),y:this.y+5,zt:this.zt},t,o,n,this)),r?(this.dx-=this.ns,this.zt=-1):a?(this.dx+=this.ns,this.zt=1):this.dx*=this.hs?this.rs:this.as,.01>Math.abs(this.dx)&&(this.dx=0),this.dx=x(this.dx,-this.At,this.At),this.dx+=u*-this.zt,this.x+=h?0:this.dx,((t,s)=>{let{x:i,y:e,dx:h,size:o}=t;if(h>0){const h=s.es(i+o,e),n=s.es(i+o,e+o-1);(h||n)&&(t.dx=0,t.x=8*Math.floor(i/8))}else if(0>h){const h=s.es(i,e),n=s.es(i,e+o-1);(h||n)&&(t.dx=0,t.x=8*Math.floor(i/8)+8)}})(this,s),l){const t=this.hs||5>this.os,s=10>this.ls;(this.cs>0||t&&s)&&(0===this.cs&&o.play("jump"),this.cs+=1,this.fs>this.cs&&(this.dy=-this.us))}else this.cs=0;this.dy+=this.Ot,this.dy=x(this.dy,-this.St,this.St),this.y+=this.dy,v(this,s)||(this.hs=!1,this.os+=1),((t,s)=>{const{x:i,y:e,size:h}=t,o=s.es(i,e),n=s.es(i+h-1,e);(o||n)&&(t.dy=0,t.y=8*Math.floor((e-h/2)/8)+8+h/2,t.cs=0)})(this,s)}static ks(t){this.ds-=t}};const S=(t,s)=>s.x+s.size>t.x&&t.x+t.size>s.x&&s.y+s.size>t.y&&t.y+t.size>s.y;class O{Cs(t,s,i){if(!t.$t&&!s.$t&&s.ds>0&&t.Nt!==s&&S(t,s)){t.Rt(),A.ks.call(s,t.Et*t.Lt);for(let e=0;t.Xt>e;e++)i.add(new f(t.x,t.y,t.dx/3*Math.random()*2,-1.5*Math.random(),s.js));return!0}return!1}vs(t,s,i){S(t,s)&&("weapon"===t.type?s.ws=t.ws:(s.ds+=200,s.ds=Math.min(s.ps,s.ds)),i.xs=i.xs.filter(s=>s!==t))}}let F=[],P=[];function z(t,s){return(t%s+s)%s}class I{constructor({As:t,ch:s}){for(let i=0;10>i;i++)F.push([Math.random()*t,Math.random()*s,Math.random()]);for(let i=0;10>i;i++)P.push([Math.random()*t,Math.random()*s,Math.random()])}ut(t){const[s,i]=this.Ss;t.ut(()=>{t.dt(s,i),F.map(s=>t.rect({rect:[z(s[0]-t.k.x/(3+3*s[2]),t.canvas.width),z(s[1]-t.k.y/(3+3*s[2]),t.canvas.height),1,1],pt:"rgba(255, 255, 255, 0.6)",yt:!1})),P.map(s=>t.rect({rect:[z(s[0]-t.k.x/(7+3*s[2]),t.canvas.width),z(s[1]-t.k.y/(7+3*s[2]),t.canvas.height),1,1],pt:"rgba(255, 255, 255, 0.3)",yt:!1})),[[100,30,1,10,"#440"],[30,50,1,4,"#311"]].forEach(s=>{t.arc({yt:!1,arc:[z(s[0]-t.k.x/(7+3*s[2]),t.canvas.width),z(s[1]-t.k.y/(7+3*s[2]),t.canvas.height),s[3],0,2*Math.PI],pt:s[4]})})})}}var B=i(0),D=new(i.n(B).a);let E=null;D.onmessage=t=>{let s=t.data;E=document.createElement("audio"),E.src=URL.createObjectURL(new Blob([s],{type:"audio/wav"})),E.volume=.7,E.loop=!0};class L{Os(){}Fs(){!function t(s){s.then(()=>{}).catch(()=>{setTimeout(()=>{let s=E.play();t(s)},1e3)})}(E.play())}}var Y=class extends u{constructor(t,s,i,e){super({x:t,y:s}),this.ws=i||(new j).random(e),this.size=5,this.Ot=.04,this.dy=.4,this.Ps=!1,this.type=i||.66>Math.random()?"weapon":"health"}lt(){this.Ps||(this.dy+=this.Ot,this.y+=this.dy)}ut(t){"weapon"===this.type?(t.rect({pt:"#C3732A",rect:[this.x,this.y,5,5]}),[[0,1],[1,0],[2,0],[3,0],[4,1],[3,2],[2,2],[2,4]].forEach(([s,i])=>t.rect({pt:"yellow",rect:[this.x+s,this.y+i,1,1]}))):(t.rect({pt:"#FFF",rect:[this.x,this.y,5,5]}),[[1,2,3,1],[2,1,1,3]].forEach(([s,i,e,h])=>t.rect({pt:"red",rect:[this.x+s,this.y+i,e,h]})))}};const X=(t,s,i,e,h={})=>{const{zs:o,Is:n,Bs:r,Ds:a,body:l}=e;let c=[];c=c.concat([[o,[1,3,5,3]],[a,[2,4,1,1]],[a,[5,4,1,1]]]),h.Es||(c=c.concat([[l,[1,7,3,1]],[o,[1,7,1,1]],[o,[4,7,1,1]]])),n&&(c=c.concat([[n,[2,1,4,1]],[n,[1,2,6,1]]])),r&&(c=c.concat([[r,[1,2,1,1]],[r,[5,2,1,1]]]));const u=h.Ls?12:h.big?2:1;return c=c.map(([e,h])=>({c:e,r:[1===i?t+h[0]*u:8*u-(h[0]+h[2])*u+t,s+h[1]*u,h[2]*u,h[3]*u]})),c},G=t=>{t.Ys=!1,t.Xs=!0},K=t=>{t.Ys=!0,t.Xs=!1},$=t=>{t.Ys||t.Xs||(t.Xs=!0),16>t.x&&G(t),t.x>288&&K(t)},W=(t,s,i)=>{if(s.Gs>0)s.Gs-=1;else{const e=i.es(s.x+24*s.zt,s.y-16);s.Gs=e&&Math.random()<t?30:0}},N=(t,s)=>{s.x-t.x>0?G(t):K(t)},R=({Ks:t,ct:s})=>20>Math.abs(s.y-t.y),U=({Ks:t,ct:s})=>[{left:t.x>s.x,right:s.x>t.x,gs:!1,bs:30>Math.abs(t.x-s.x)},!0],H=([t,s,i,e])=>({zs:t,Bs:s,Ds:i,body:e}),T=H(["#50c878","#50c878","#c00","#a00"]),_=H(["beige","beige","red","red"]),J=H(["#919","#919","#be0","#f58"]),q=H(["#4cc9f0","#4cc9f0","#f72585","#4361ee"]),V=H(["#dd0","#dd0","#09f","#a30"]),Q=H(["#a00","#a00","yellow","#a60"]);var Z={$s:{type:"sentinel",ds:22,Ws:U,Ss:T,ws:(new j).create(m)},Ns:{type:"pacifist",ds:22,Ws:({Ks:t,map:s})=>($(t),W(.1,t,s),[{left:t.Ys,right:t.Xs,gs:t.Gs>0},!1]),Ss:_},Rs:{type:"idiot",ds:22,Ws:({Ks:t})=>{let s;if(t.Gt%30==0){const t=.5>Math.random();s={left:t,right:!t,gs:.5>Math.random(),bs:.7>Math.random()}}else s=null;return[s,!1]},Ss:J},Us:{type:"runAndGun",ds:22,Ws:({Ks:t,map:s,ct:i})=>{$(t),W(.1,t,s);const e=((t,s)=>(20>Math.abs(s.y-t.y)&&N(t,s),R({Ks:t,ct:s})))(t,i);return[{left:t.Ys,right:t.Xs,gs:t.Gs>0,bs:e},!1]},Ss:q},Hs:{type:"aggro",ds:22,Ws:({Ks:t,ct:s,map:i})=>{N(t,s),((t,s,i)=>{t.y>s.y&&W(1,t,i)})(t,s,i);const e=R({Ks:t,ct:s});return[{left:t.Ys,right:t.Xs,gs:t.Gs>0,bs:e},!1]},Ss:V},Ts:{type:"boss",ds:400,Ws:U,Ss:Q}};const tt=[{background:["#112","#131"],_s:["#114","#336","#003"]},{background:["#33f","#1f1"],_s:["#963","#c96","#620"]}],st={Js:1,qs:[40,0],Vs:T,Qs:[[230,100]],Zs:{$s:1}},it=[[45,10],[155,10],[265,10],[90,10],[220,30],[48,80],[130,80],[180,80],[260,80],[110,110],[205,110]],et=[t=>({Js:3+Math.floor(t/6),qs:[40,150],Vs:T,Qs:it,Zs:{$s:10+3*Math.floor(t/6)}}),t=>({Js:3+Math.floor(t/6),qs:[40,150],Vs:_,Qs:it,Zs:{Ns:10+3*Math.floor(t/6)}}),t=>({Js:3+Math.floor(t/6),qs:[40,150],Vs:J,Qs:it,Zs:{Rs:10+3*Math.floor(t/6)}}),t=>({Js:3+Math.floor(t/6),qs:[40,150],Vs:q,Qs:it,Zs:{Us:10+3*Math.floor(t/6)}}),t=>({Js:3+Math.floor(t/6),qs:[40,150],Vs:V,Qs:it,Zs:{Hs:10+3*Math.floor(t/6)}}),()=>({Js:1,qs:[20,156],Vs:Q,Qs:[[120,10]],Zs:{Ts:1}})],ht=80,ot=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],nt=["ffffffffff","8000000001","8000000001","8000000001","8000000001","87007e00e1","8000000001","8000000001","f03c003c0f","8000000001","8000000001","8300c300c1","8000000001","8000000001","8fc07e03f1","8000000001","8000000001","e00f00f007","8000000001","8000000001","ffffffffff"].map(t=>parseInt(t,16).toString(2).split("").map(Number)),rt=[nt,nt,nt,nt,nt,[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]];class at{constructor(){this.ti=null,this.it=8,this.si=[],this.ot=0,this.et=0}ii(t,s){let i;i=1===t?ot:rt[(t-1)%6]||nt,this.si=i,this.ot=i.length,this.et=i[0].length,this.ei=this.it*this.et,this.hi=this.it*this.ot,this.oi=s}es(t,s){const i=this.si[Math.floor(s/this.it)];return i?i[Math.floor(t/this.it)]:1}ut(t){const[s,i,e]=this.oi;this.ti=this.ti||t,this.si.forEach((h,o)=>{h.forEach((h,n)=>{1===h&&(t.rect({pt:s,rect:[n*this.it+1,o*this.it+1,this.it-2,this.it-2]}),t.rect({pt:i,rect:[n*this.it+1,o*this.it,this.it-2,1]}),t.rect({pt:e,rect:[n*this.it+1,o*this.it+this.it-1,this.it-2,1]}),t.rect({pt:i,rect:[n*this.it,o*this.it+1,1,this.it-2]}),t.rect({pt:e,rect:[n*this.it+this.it-1,o*this.it+1,1,this.it-2]}))})})}}var lt=class extends u{constructor(t,s,i,e,h){super({x:t,y:s}),this.dx=i,this.dy=e,this.Ot=.1,this.color=h,this.Ft=!1}Pt(){this.Ft=!0}lt(){this.Ft||(this.x+=this.dx,this.dy+=this.Ot,this.y+=this.dy)}ut(t){t.rect({pt:this.color,rect:[this.x,this.y-2,2,3]}),[[1,2],[2,3]].forEach(([s,i])=>{t.rect({pt:this.color,rect:[this.x+s-2,this.y+i-2,1,1]})}),[[2,0],[1,1],[0,2],[1,3]].forEach(([s,i])=>{t.rect({pt:"#FF77A8",rect:[this.x+s-2,this.y+i-2,1,1]})})}},ct=class extends A{constructor(t,s,i){super(t,s,i),this.js="red",this.ws=null,this.ni=!1}lt({k:t,ri:s,map:i,ys:e,qt:h,ai:o,li:n}){if(0>=this.ds&&!this.ni){for(let t=0;200>t;t++)o.add(new f(this.x,this.y,5*Math.random()-2.5,5*Math.random()-5,"red"));for(let t=0;10>t;t++)n.li.push(new lt(this.x,this.y-2,3*Math.random()-1.5,3*Math.random()-1.5,"red"));this.ni=!0}this.ni||A.lt.call(this,{k:t,map:i,ys:e,ms:{left:s.ci(s.ui),right:s.ci(s.fi),gs:s.ci(s.di),bs:s.ci(s.pi)},qt:h,volume:1})}ut(t){this.ni||(X(this.x,this.y,this.zt,{zs:"#FFCCAA",Is:"#FFA300",Ds:"#008751",body:"#29ADFF"}).forEach(({c:s,r:i})=>t.rect({pt:s,rect:i})),this.ws&&this.ws.ut(t,{x:this.x,y:this.y,zt:this.zt}))}};const ut={color:()=>"yellow",speed:1.5,Dt:-.6,Ot:0,Bt:.3,Yt:3,size:5,Et:10,Xt:20},ft={Ht:15,_t:1,rt:{ss:1,duration:15},qt:"shotgun",Vt:ut},dt=Object.assign({},ft);dt.Vt=Object.assign({},ut),dt.Vt.Dt=.6;const pt=t=>{const s=Object.assign({},y.Vt);s.Dt=t;const i=Object.assign({},y);return i.Vt=s,i},wt=[{ws:new p(pt(.8)),y:25,x:40,wi:40,offset:70},{ws:new p(pt(.4)),y:28,x:40,wi:40,offset:60},{ws:new p(y),y:31,x:40,wi:40,offset:50},{ws:new p(pt(0)),y:33,x:40,wi:40,offset:40},{ws:new p(pt(-.4)),y:36,x:40,wi:40,offset:30},{ws:new p(pt(-.8)),y:39,x:40,wi:40,offset:20},{ws:new p(ft),y:30,x:28,wi:100,offset:200},{ws:new p(dt),y:10,x:28,wi:100,offset:200}],yt={Ht:15,_t:0,rt:{ss:4,duration:200},qt:"death",Vt:{color:()=>"yellow",speed:1.5,Dt:-.6,Ot:0,Bt:.3,Yt:3,size:5,Et:10,Xt:5}};var mt=class extends A{constructor(t,s,i,e,h){super(t,s,i,e,h),this.js="#32CD32",this.size=56,this.dx=.2}lt({map:t,ys:s,k:i,qt:e,ct:h,ai:o,li:n}){var r;this.Gt+=1,this.x+=this.zt*this.dx,this.x=Math.max(Math.min(this.x,160),105),this.dy+=this.Ot,this.dy=(r=this.St,Math.min(Math.max(-this.St,this.dy),r)),this.y+=this.dy,v(this,t)||(this.hs=!1,this.os+=1),this.yi?(this.Gt%100||(this.dx=1-2*Math.random(),this.dy=1-2*Math.random()),this.zt=h.x>this.x+this.size/2?1:-1,this.y=Math.max(Math.min(this.y,100),10)):this.Gt%200||(this.zt=h.x>this.x+this.size/2?1:-1),wt.forEach(({ws:t,x:h,y:o,wi:n,offset:r})=>{this.Gt>100&&t.lt(n>(this.Gt+r)%(this.yi?200:400),s,{x:this.x+h,y:this.y+o,zt:this.zt},i,e,.7,this)}),this.yi||this.ds>200||(this.yi=!0,this.size=32,this.Ot=0,this.x+=10*this.zt,this.dx=2,this.mi({ai:o,li:n,qt:e}),new p(yt).lt(!0,s,{},i,e,1,this)),this.ds>0||new p(yt).lt(!0,s,{},i,e,1,this)}mi({ai:t,li:s}){for(let s=0;300>s;s++)t.add(new f(this.x+60*Math.random(),this.y+60*Math.random(),5*Math.random()-2.5,5*Math.random()-5,this.js));for(let t=0;40>t;t++)s.li.push(new lt(this.x+60*Math.random(),this.y+60*Math.random(),3*Math.random()-1.5,3*Math.random()-1.5,"red"))}ut(t){if(this.ps>this.ds&&t.rect({pt:"white",rect:[this.x-2,this.y-(this.yi?10:22),this.ds/this.ps*60,2]}),this.yi){const s=4;[[2,0,5,1],[1,1,7,1],[0,2,9,2],[2,4,3,1],[7,4,2,1],[2,5,1,1],[4,5,1,1],[7,5,2,1],[0,6,8,1],[1,7,5,1],[1,8,1,1],[3,8,1,1],[5,8,1,1]].forEach(([i,e,h,o])=>t.rect({pt:"white",rect:[this.x+(1===this.zt?8-i-h:i)*s,this.y+e*s,h*s,o*s]}))}else X(this.x-(1===this.zt?13:26),this.y-40,this.zt,Q,{Ls:!0}).forEach(({c:s,r:i})=>t.rect({pt:s,rect:i}))}},Mt=class extends A{constructor(t,s,i,e,h,o,n){super(t,s,i,e,n),this.At=.8,this.Ss=h,this.js="#32CD32",this.ms={left:!1,right:!1,gs:!1,bs:!1},this.Ws=o}lt({k:t,map:s,ys:i,ct:e,qt:h}){const[o,n]=this.Ws({Ks:this,map:s,ct:e});o&&(this.ms=o),A.lt.call(this,{k:t,map:s,ys:i,ms:this.ms,qt:h,Ms:n,volume:.7})}mi({ai:t,li:s,qt:i}){i.play("death");for(let s=0;100>s;s++)t.add(new f(this.x,this.y,5*Math.random()-2.5,5*Math.random()-5,this.js));for(let t=0;5>t;t++)s.li.push(new lt(this.x,this.y-2,3*Math.random()-1.5,3*Math.random()-1.5,"red"))}ut(t){this.ps>this.ds&&t.rect({pt:"white",rect:[this.x,this.y-1,this.ds/this.ps*8,1]}),X(this.x,this.y,this.zt,this.Ss).forEach(({c:s,r:i})=>t.rect({pt:s,rect:i,opacity:Math.min(this.Gt/120,1)})),this.ws&&this.ws.ut(t,{x:this.x,y:this.y,zt:this.zt})}};window.onload=()=>{let t=new r,s=new h(t.canvas),i=new class{constructor(){document.addEventListener("keyup",t=>this.Mi(t)),document.addEventListener("keydown",t=>this.gi(t)),this.bi={},this.pi={ri:[32],controller:[0,1,5,7]},this.ui={ri:[37,65],controller:[14],dir:"l"},this.di={ri:[38,87,16,17],controller:[12,2,3]},this.fi={ri:[39,68],controller:[15],dir:"r"},this.ki={ri:[40,83],controller:[13]}}Ci(t){if(!navigator.getGamepads()[0])return!1;const s=navigator.getGamepads()[0].axes;return{i:0>s[0],r:s[0]>0}[t]}ji(t){return!!navigator.getGamepads()[0]&&navigator.getGamepads()[0].buttons.reduce((t,s,i)=>s.pressed?t.concat([i]):t,[]).some(s=>t.includes(s))}vi(t){return t.some(t=>this.bi[t])}ci(t){return this.Ci(t.dir)||this.vi(t.ri)||this.ji(t.controller)||!1}gi(t){this.bi[t.keyCode]=!0}Mi(t){delete this.bi[t.keyCode]}},e=new c,o=new O,n=new I({As:t.canvas.width,ch:t.canvas.height}),a=new class{constructor(){this.xi=new L,this.Ai=!1,this.Si=!1,this.Oi=0}Fi(t,{ct:s,Zs:i,li:e,ai:h,xs:o,map:n,background:r}){this.level=1===t?st:et[(t-1)%6](t),this.level.level=t,this.level.Pi=Object.entries(this.level.Zs).reduce((t,[s,i])=>t+i,0);const a=tt[Math.floor((t-1)/6)%2];n.ii(t,a._s),r.Ss=a.background,s.ds=s.ps,s.x=this.level.qs[0],s.y=this.level.qs[1],e.li=[],h.ai=[],o.xs=1===t?[new Y(146,90,(new j).create(m))]:[],i.initialize(this.level),this.zi=0,this.Ii=0,this.Bi=!1,this.Oi+=this.level.Pi}lt({ct:t,Zs:s,li:i,ai:e,xs:h,qt:o,map:n,background:r}){t.ds>0||(this.Si=!0),this.Ii+=1,s.Zs.length>0||(this.zi+=1),this.zi===ht&&o.xt(.2),this.zi>ht*(7+(1===this.level.level?3:0))&&(o.xt(1),this.Fi(this.level.level+1,{ct:t,Zs:s,li:i,ai:e,xs:h,map:n,background:r}));const a=this.Bi;this.Bi=1===this.level.level&&this.zi>7*ht,a!==this.Bi&&this.xi.Fs(),[ht,2*ht,3*ht,4*ht].includes(this.zi)&&o.play("message")}Di(t){this.zi>ht&&t.rect({yt:!1,pt:"rgba(0,0,0,0.9)",rect:[36,49,88,60]}),this.zi>2*ht&&t.text({text:`level ${this.level.level} complete`,size:1,x:47-(10>this.level.level?0:2),y:59}),this.zi>3*ht&&t.text({text:`${this.Oi} alien${1!==this.Oi?"s":""} defeated`,size:1,x:47-(10>this.Oi?0:2),y:74}),this.zi>4*ht&&(X(48,89,1,T,{Es:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})),X(58,89,1,_,{Es:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})),X(68,89,1,J,{Es:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})),X(78,89,1,q,{Es:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})),X(88,89,1,V,{Es:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})),X(98,84,1,Q,{Es:!0,big:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})));const s=(s,i=0)=>{t.gt({gt:[[s+i/2,90-i],[s+7+3*i,96+i]],wt:"red"}),t.gt({gt:[[s+7+3*i,90-i],[s+i/2,96+i]],wt:"red"})};this.zi>5*ht&&(0>(this.level.level-1)%6||s(48)),this.zi>5.1*ht&&(1>(this.level.level-1)%6||s(58)),this.zi>5.2*ht&&(2>(this.level.level-1)%6||s(68)),this.zi>5.3*ht&&(3>(this.level.level-1)%6||s(78)),this.zi>5.4*ht&&(4>(this.level.level-1)%6||s(88)),this.zi>5.5*ht&&(5>(this.level.level-1)%6||s(98,2))}ut(t){this.Di(t),this.Bi&&(t.rect({yt:!1,pt:"#000",rect:[0,0,160,160]}),t.text({text:"Welcome",size:4,x:17,y:40}),t.text({text:"to space",size:4,x:19,y:70})),200>this.Ii&&t.rect({yt:!1,pt:`rgba(0,0,0,${1-this.Ii/200})`,rect:[0,0,160,160]});const s=ht*(7+(1===this.level.level?3:0));this.zi>s-50&&t.rect({yt:!1,pt:`rgba(0,0,0,${1-(s-this.zi)/50})`,rect:[0,0,160,160]}),this.Si&&(t.rect({yt:!1,pt:"#000",rect:[31,26,98,31]}),t.text({text:"Game over",size:2,x:40,y:36}))}},l=new at,u=new class{constructor(){}lt(t,s,i){t.ws&&(this.ws=t.ws.name),this.ds=t.ds,this.ps=t.ps,this.ni=t.ni,this.Pi=s.Pi+s.Zs.length,this.Vs=i}ut(t){this.ni||(this.ws&&t.text({text:this.ws,size:1,x:2,y:149}),X(145,147,1,this.Vs,{Es:!0}).forEach(({c:s,r:i})=>t.rect({yt:!1,pt:s,rect:i})),t.text({text:""+this.Pi,size:1,x:152,y:149}),t.rect({yt:!1,pt:`rgb(${255*(1-this.ds/this.ps)}, ${this.ds/this.ps*255}, 0)`,rect:[2,156,this.ds/this.ps*160-4,2]}))}},f=new ct(10,10,350),d=new class{constructor(){this.Zs=[],this.Ei=[],this.Pi=0,this.Gt=0}initialize({Js:t,Pi:s,Qs:i,Zs:e,level:h}){this.Gt=0,this.Js=t,this.Pi=s,this.Li=()=>i[Math.floor(Math.random()*i.length)],this.Ei=[],Object.entries(e).forEach(([t,s])=>{this.Ei=this.Ei.concat(Array(s).fill(t))});for(let s=0;t>s;s++)this.Zs.push(this.Yi(h))}Yi(t){this.Pi-=1;let{type:s,ds:i,Ws:e,Ss:h,ws:o}=Z[this.Ei.pop()];o=o||(new j).random(t);const[n,r]=this.Li();return"boss"===s?new mt(n,r,i,-1):new Mt(n,r,i,-1,h,e,o)}Xi(t){if(t>6&&!(this.Gt%Math.floor(1e3/(.1*(Math.max(t-7,0)+10))))){const s=(new j).random(t),[i,e]=this.Li(),h=Object.entries(Z).filter(([t,s])=>"boss"!==s.type).map(([t,s])=>s),{ds:o,Ss:n,Ws:r}=h[Math.floor(Math.random()*h.length)],a=new Mt(i,e,o,-1,n,r,s);this.Zs.push(a)}}lt({k:t,map:s,ys:i,ai:e,li:h,ct:o,qt:n,level:r}){this.Gt+=1,this.Zs.length>0&&this.Xi(r.level.level),this.Zs.forEach(r=>{r.lt({k:t,map:s,ys:i,ct:o,qt:n,ai:e,li:h})}),this.Zs=this.Zs.reduce((t,s)=>(s.ds>0?t.push(s):(s.mi({ai:e,li:h,qt:n}),this.Js>=this.Zs.length&&this.Pi>0&&t.push(this.Yi(r.level.level))),t),[])}ut(t){this.Zs.forEach(s=>s.ut(t))}},p=new class{constructor(){this.ys=[]}add(t){this.ys.push(t)}lt(){this.ys.map(t=>t.lt()),this.ys=this.ys.filter(t=>!t.Kt)}ut(t){this.ys.map(s=>s.ut(t))}},w=new class{constructor(){this.ai=[]}add(t){this.ai.push(t)}lt(){this.ai.length>1e3&&(this.ai=this.ai.slice(this.ai.length-1e3)),this.ai.forEach(t=>t.lt())}ut(t){this.ai.forEach(s=>s.ut(t))}},y={li:[]},M=new class{constructor(){this.xs=[],this.Gt=0}lt(t,s){if(this.Gt+=1,!(this.Gt%500)&&1!==s){let i=Math.random()*t.ei,e=Math.random()*t.hi;for(;t.es(i,e+1);)i=Math.random()*t.ei,e=Math.random()*t.hi;this.xs.push(new Y(i,e,null,s))}this.xs.forEach(t=>t.lt())}ut(t){this.xs.forEach(s=>s.ut(t))}};t.initialize(),a.Fi(1,{ct:f,Zs:d,li:y,ai:w,xs:M,map:l,background:n});let g=0,b=t=>{window.requestAnimationFrame(b),t-g&&(k(),C(),s.ft(),v().map(t=>t.ut(s)),g=t-0)},k=()=>{const{k:t}=s;a.lt({ct:f,Zs:d,li:y,ai:w,xs:M,qt:e,map:l,background:n}),f.lt({k:t,ri:i,map:l,ys:p,qt:e,li:y,ai:w}),d.lt({k:t,map:l,ys:p,ai:w,li:y,ct:f,qt:e,level:a}),t.lt({ct:f,map:l}),p.lt(),w.lt(),y.li.length>1e3&&(y.li=y.li.slice(y.li.length-1e3)),y.li.forEach(t=>t.lt()),u.lt(f,d,a.level.Vs),M.lt(l,a.level.level)},C=()=>{p.ys.filter(t=>!t.$t).forEach(t=>{l.es(t.x,t.y)&&t.Rt(),d.Zs.concat([f]).forEach(s=>{o.Cs(t,s,w)})}),w.ai.concat(y.li).forEach(t=>{l.es(t.x,t.y)&&t.Pt()}),M.xs.forEach(t=>{l.es(t.x,t.y+t.size)&&(t.Ps=!0),d.Zs.concat([f]).forEach(s=>{o.vs(t,s,M)})})},v=()=>[n,l,d,f,M,p,w,...y.li,u,a];document.querySelector("div").className+=" loaded",b()}}]);</script>